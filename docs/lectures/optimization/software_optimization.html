
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Software Optimization &#8212; IN1910 - Programming with Scientific Applications</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Optimization and Mixed Programming" href="optimization_and_mixed_programming.html" />
    <link rel="prev" title="Software optimization and parallelism" href="optimization.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">IN1910 - Programming with Scientific Applications</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../README.html">
   IN1910 – Programming with Scientific Applications
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General information
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/overview.html">
   Overview of lectures and exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/curriculum.html">
   Curriculum
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/motivation.html">
   The motivation behind IN1910
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/exam.html">
   Project Work, Grading and Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/help.html">
   Getting help or giving feedback
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Setting up your computer for IN1910
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../setup/setup.html">
   Installation instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../setup/cpp_compiler.html">
   Installing a C++ compiler
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lecture videos
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../videos/videos_H21.html">
   Lecture videos from H21
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../videos/videos_H20.html">
   Lecture videos from H20
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../videos/videos_H19.html">
   Lecture videos from H19
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../python/python_intro.html">
   A quick Python refresher
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python/python_oop.html">
   Object-oriented programming in Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/intro_to_oop.html">
     Introduction to Object-Oriented Programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/classes_methods_decorators.html">
     Creating classes in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/more_oop.html">
     More on Object-Oriented Programming
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../git/version_control_with_git.html">
   Version Control with Git
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../testing_codestyle/testing_codestyle.html">
   Testing and Code style
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../testing_codestyle/writing_functioning_code.html">
     Writing Reliable Software
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../testing_codestyle/codestyle_and_docstrings.html">
     Code Style and Documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../testing_codestyle/type_annotations.html">
     Type annotations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../cpp/cpp.html">
   C++
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/intro_to_cpp.html">
     An introduction to C++
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/arrays_and_pointers.html">
     Arrays, Memory and Pointers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/oop_in_cpp.html">
     Object-oriented Programming in C++
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/dynamic_allocation.html">
     More on pointers and arrays and dynamic allocation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/cpptools.html">
     C++ tips and tricks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/arraylist.html">
     Dynamic Arrays, aka, Array Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/linked_lists.html">
     Linked Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/algorithm_analysis.html">
     Algorithm Analysis and Big Oh Notation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/linkedlists_vs_dynamicarrays.html">
     Comparing Linked Lists and Dynamic Arrays
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/sorting.html">
     Sorting Algorithms
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../stochastic_processes/stochastic_processes.html">
   Stochastic processes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/random_number_generators.html">
     Random Number Generators and Seeding
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/using_random_numbers.html">
     Using Random Numbers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/random_walks_and_markov_processes.html">
     Random Walks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/solving_the_1D_diffusion_equation.html">
     Solving the 1D Diffusion Equation using Finite Differences
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/markov_chains.html">
     Markov processes and Markov chains
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="optimization.html">
   Software optimization and parallelism
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Software Optimization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="optimization_and_mixed_programming.html">
     Optimization and Mixed Programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="parallel_programming.html">
     Parallel Programming
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../summary/course_summary.html">
   Course Summary
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <a href="https://www.uio.no/studier/emner/matnat/ifi/IN1910/h22/index.html">Course homepage at UiO</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../../../_sources/docs/lectures/optimization/software_optimization.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/docs/lectures/optimization/software_optimization.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/finsberg/IN1910_H22/issues/new?title=Issue%20on%20page%20%2Fdocs/lectures/optimization/software_optimization.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/finsberg/IN1910_H22/gh-pages?urlpath=tree/_sources/docs/lectures/optimization/software_optimization.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://hub2.jupyterhub.uio.no/hub/user-redirect/git-pull?repo=https://github.com/finsberg/IN1910_H22&urlpath=tree/IN1910_H22/_sources/docs/lectures/optimization/software_optimization.md&branch=gh-pages"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-software-optimization">
   What is Software Optimization?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#efficient-programs">
     Efficient Programs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#when-to-optimize">
   When to optimize?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#first-make-it-work">
     1. First make it work
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#then-make-it-elegant">
     2. Then make it elegant
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lastly-make-it-fast">
     3.  Lastly, Make it Fast
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#should-you-optimize">
   Should you Optimize?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#benefits-of-optimization">
   Benefits of optimization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drawbacks-of-optimization">
     Drawbacks of optimization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-optimize">
   How to Optimize
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#timing-and-benchmarking">
   Timing and Benchmarking
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#timing-lines-functions-and-modules">
     Timing lines, functions and modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#benchmarking">
   Benchmarking
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#profiling">
   Profiling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-the-drunkard-s-walk">
     Example: The Drunkard’s Walk
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-on-cprofile">
     More on cProfile
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#line-profiling">
   Line Profiling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#memory-optimization">
   Memory optimization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taking-a-step-back-the-rules-of-optimization">
   Taking a step back: The Rules of Optimization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-root-of-all-evil">
     The root of all evil
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Software Optimization</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-software-optimization">
   What is Software Optimization?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#efficient-programs">
     Efficient Programs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#when-to-optimize">
   When to optimize?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#first-make-it-work">
     1. First make it work
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#then-make-it-elegant">
     2. Then make it elegant
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lastly-make-it-fast">
     3.  Lastly, Make it Fast
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#should-you-optimize">
   Should you Optimize?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#benefits-of-optimization">
   Benefits of optimization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#drawbacks-of-optimization">
     Drawbacks of optimization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-optimize">
   How to Optimize
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#timing-and-benchmarking">
   Timing and Benchmarking
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#timing-lines-functions-and-modules">
     Timing lines, functions and modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#benchmarking">
   Benchmarking
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#profiling">
   Profiling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-the-drunkard-s-walk">
     Example: The Drunkard’s Walk
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-on-cprofile">
     More on cProfile
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#line-profiling">
   Line Profiling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#memory-optimization">
   Memory optimization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taking-a-step-back-the-rules-of-optimization">
   Taking a step back: The Rules of Optimization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-root-of-all-evil">
     The root of all evil
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="software-optimization">
<h1>Software Optimization<a class="headerlink" href="#software-optimization" title="Permalink to this headline">¶</a></h1>
<p>We are now getting to the end of IN1910. In fact, there are only four lectures left. We are now starting on our last new topic in IN1910: Optimization.</p>
<p>The four remaining lectures will be organized as follows:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Lecture</p></th>
<th class="head"><p>Topics</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>L21</p></td>
<td><p>Benchmarking and Profiling</p></td>
</tr>
<tr class="row-odd"><td><p>L22</p></td>
<td><p>Mixed programming</p></td>
</tr>
<tr class="row-even"><td><p>L23</p></td>
<td><p>Parallel programming</p></td>
</tr>
<tr class="row-odd"><td><p>L24</p></td>
<td><p>Summary of IN1910</p></td>
</tr>
</tbody>
</table>
<div class="section" id="what-is-software-optimization">
<h2>What is Software Optimization?<a class="headerlink" href="#what-is-software-optimization" title="Permalink to this headline">¶</a></h2>
<p>The word optimization gets thrown around, bet let us try to narrow down what we actually mean by it. The word <em>“optimize”</em> itself literally means to</p>
<ul class="simple">
<li><p><em>optimize</em> — Make the best or most effective use of (a situation or resource).</p></li>
</ul>
<p>To optimize software therefore means to make the software more effective. The word itself comes from the word “optimal”, however, it is important to stress that making an “optimal” program is as good as impossible, as there is no single “optimal” program. The goal is therefore to make a program <em>better</em>, not to make it <em>the best</em>.</p>
<p>It is also important to clearly distinguish software optimization with <a class="reference external" href="https://en.wikipedia.org/wiki/Mathematical_optimization"><em>mathematical optimization</em></a>. Mathematical optimization is, put simply, what input arguments or parameters minimize or maximize some mathematical function. This kind of optimization is also a very important topic, and is often related to numerical methods such as <em>Newton’s method</em>. When simply using the term <em>optimization</em>, even when talking about programming, it is not always clear whether one refers to optimizing the code itself, or if one is solving an optimization problem. Here it is important to be clear.</p>
<p>In IN1910, we are looking at <em>software optimization</em>, not mathematical optimization. Our goal is to create more efficient programs.</p>
<div class="section" id="efficient-programs">
<h3>Efficient Programs<a class="headerlink" href="#efficient-programs" title="Permalink to this headline">¶</a></h3>
<p>What do we mean by making more efficient programs? The main goal is often to make programs <em>faster</em>. Optimization is talking about <em>speed</em>. Optimizing a program is often about simply making it run faster. However, sometimes, optimizing might mean becoming efficient with other resources. One can for example optimize with respect to memory usage of the program, or with respect to broadband usage. For mobile programming, battery usage can be an important thing to optimize with respect to, or simply the the size of the program itself.</p>
<p>Optimizing with respect to different resources can often be a trade-of. For a given problem we might be able to make it run faster, but to do so, we need to also use more memory. Then we need to weigh the pros and cons and choose which to focus on.</p>
<p>For scientific programming, <em>speed</em> is usually what we care most about, and it is what we will mostly think about in IN1910.</p>
</div>
</div>
<div class="section" id="when-to-optimize">
<h2>When to optimize?<a class="headerlink" href="#when-to-optimize" title="Permalink to this headline">¶</a></h2>
<p>The first question we want to look at, is <em>when</em> to optimize code. Ideally we would of course simply write efficient and optimal code from the get go, however, that is not realistic. When facing a new problem and coding, we already have our plate full simply trying to find a solution to the problem, if we at the same time was trying to optimize our code at every step, the whole process would take much longer and we would get stuck more easily.</p>
<p>Because of this concept, most proficient programmers recommend to postpone optimizing to <em>after</em> having developed code that works. This statement was formulated by Kent Beck as:</p>
<ol class="simple">
<li><p>Make it Work</p></li>
<li><p>Make it Right</p></li>
<li><p>Make it Fast</p></li>
</ol>
<p>I prefer to paraphrase Beck as</p>
<ol class="simple">
<li><p>First make it work</p></li>
<li><p>Then make it elegant</p></li>
<li><p>Lastly, make it fast</p></li>
</ol>
<p>Let us look at each step separately</p>
<div class="section" id="first-make-it-work">
<h3>1. First make it work<a class="headerlink" href="#first-make-it-work" title="Permalink to this headline">¶</a></h3>
<p>When you start solving a brand new problem or implement a new feature, you cannot possibly focus on everything at once. A major goal in programming is as always to work <em>incrementally</em>. Therefore, when you sit down with a new problem, you should <em>ignore optimization</em>, and instead focus on the basics. Simply: <em>How do I solve this problem?</em></p>
<p>As you are breaking down the problem and implementing, and getting close to a working solution, you also need to <em>verify</em> that it works through verification and validation. This is done through rigorous testing, as we have covered earlier in the course. Writing an extensive test-suite of test cases, unit tests and integration tests can make us confident that we have a working solution.</p>
</div>
<div class="section" id="then-make-it-elegant">
<h3>2. Then make it elegant<a class="headerlink" href="#then-make-it-elegant" title="Permalink to this headline">¶</a></h3>
<p>After you have managed to break down your problem and created a solution that seems to work, the next step is to make it “elegant”. Others refer to it as making the code “pretty”, or as Beck calls it, making it “right”.</p>
<p>The step of making the code elegant does not refer to the actual functionality of the code, but everything else. The major part of this step is referred to as <a class="reference external" href="https://en.wikipedia.org/wiki/Code_refactoring"><em>refactoring</em></a> code. Refactoring code means rewriting it, not to change its function, but to improve it in other ways.</p>
<p>Refactoring can include changing the overall structure of the code, for example splitting things into functions, classes or modules in different ways. But it can also mean rewrite single lines, or changing variable names. The goals are simple: making the code more structured and readable. The benefits is that the code is easier to read, easier to understand and easier to maintain and develop further.</p>
<blockquote>
<div><p>By continuously improving the design of code, we make it easier and easier to work with. This is in sharp contrast to what typically happens: little refactoring and a great deal of attention paid to expediently adding new features. If you get into the hygienic habit of refactoring continuously, you’ll find that it is easier to extend and maintain code.
— Joshua Kerievsky, Refactoring to Patterns</p>
</div></blockquote>
<p>When refactoring code, you should also look closely at your code style. When working fast at prototyping and solving new problems, you are most likely not strictly adhering to a given style guide, but before you put your code into production (handing it in, publishing it online, sharing it with colleagues, etc), you should go back through and make sure your style is consistent and solid.</p>
<p>Another important part of making code elegant, is to build in good documentation. In Python, this is about writing good docstrings. This step can wait until you have both developed working code, and then have refactored it. This is because if you write your docstrings <em>before</em> the code, then you might change things around so your documentation is no longer describing the actual code. And recall, wrong documentation is worse than no documentation.</p>
<p>After making the code more elegant through refactoring and rewriting, you should rerun all the tests you made in step (1). This is because in the process of changing things around and rewriting it, you might have accidentally broken your code. By rerunning the tests, you can verify that the behavior of the program itself is unchanged. This also emphasizes how important it is to implement good and extensive tests.</p>
</div>
<div class="section" id="lastly-make-it-fast">
<h3>3.  Lastly, Make it Fast<a class="headerlink" href="#lastly-make-it-fast" title="Permalink to this headline">¶</a></h3>
<p>And now we are finally at the optimization step. The important point is that it is placed <em>after</em> developing a working code, and making that code elegant. Only after you have done these steps can you start looking at how to make this code faster.</p>
<p><em>How</em> to make the code faster is the topic we will turn to shortly. However, it is also important to emphasize that if we make changes to our code to make it more effective and faster, we should rerun tests and verify that our changed solution still solves the problem and that we have not broken it in our strive for speed.</p>
</div>
</div>
<div class="section" id="should-you-optimize">
<h2>Should you Optimize?<a class="headerlink" href="#should-you-optimize" title="Permalink to this headline">¶</a></h2>
<p>The third step above was formulated as “Make it Fast”, however, before you start doing this, you should also ask yourself <em>Should you even optimize?</em>  Optimizing code is a tricky task, and in the process of making your code faster, you are paradoxically spending time. If the goal of optimizing the code is to <em>save time</em>, you need to save more time with the optimized code than it takes to actually perform the changes.</p>
<p>The XKCD comic below illustrates this point by showing how much time you can invest into optimizing your code and still save time. As the comic illustrates, how much time you save by optimizing depends on <em>how many times you run your code</em>.</p>
<div class="figure align-default" id="xkcd1205">
<a class="reference internal image-reference" href="../../../_images/xkcd1205.png"><img alt="xkcd1205" src="../../../_images/xkcd1205.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 46 </span><span class="caption-text"><strong>Source:</strong> <a class="reference external" href="https://xkcd.com/1205/">XKCD #1205</a></span><a class="headerlink" href="#xkcd1205" title="Permalink to this image">¶</a></p>
</div>
<p>It is important to stress that if the goal is to produce code that is to be shared with others or sold, making the code more efficient makes a <em>better</em> product, and so the goal is itself not to save your own time, but save others time. The table above is more from the point of view of writing and using your own code. In addition, sometimes optimization is done as a learning exercise, in which case the time used in the optimization isn’t “wasted time”. In other cases it is about showing of, earning epic bragging rights or winning programming competitions.</p>
<div class="figure align-default" id="xkcd974">
<a class="reference internal image-reference" href="../../../_images/xkcd974.png"><img alt="xkcd974" src="../../../_images/xkcd974.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 47 </span><span class="caption-text"><strong>Source:</strong> <a class="reference external" href="https://xkcd.com/974/">XKCD #974</a></span><a class="headerlink" href="#xkcd974" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="xkcd1319">
<a class="reference internal image-reference" href="../../../_images/xkcd1319.png"><img alt="xkcd1319" src="../../../_images/xkcd1319.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 48 </span><span class="caption-text"><strong>Source:</strong> <a class="reference external" href="https://xkcd.com/1319/">XKCD #1319</a></span><a class="headerlink" href="#xkcd1319" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="benefits-of-optimization">
<h2>Benefits of optimization<a class="headerlink" href="#benefits-of-optimization" title="Permalink to this headline">¶</a></h2>
<p>Making programs run faster is not only about <em>saving time</em>. In scientific programming, if we are able to make a program or experiment run faster, it not only saves us time, but it also enables us to carry out experiments at a larger scale, better precision or simply to run more experiments. Optimizing for speed is therefore important in that it not only enables us to do things faster, but it enables us to do <em>more things</em>.</p>
<div class="section" id="drawbacks-of-optimization">
<h3>Drawbacks of optimization<a class="headerlink" href="#drawbacks-of-optimization" title="Permalink to this headline">¶</a></h3>
<p>While <em>optimizing</em> and making more efficient code sounds great, it is important to remember that there are <em>drawbacks</em> to optimizing code as well.</p>
<p>The first drawback is, as already mentioned, that it simply takes a lot of development time. This development time could have instead been invested into making code that was more general, contained more features, was better tested and so on. For scientific programming, time spent optimizing code could instead have been invested into exploring the problems in other ways, or analyzing results, writing papers and so on.</p>
<p>Another aspect of optimization is that optimized code is also often less readable than less optimized, but more intuitive code. In the process of making the code faster, we are actually making it harder to read and understand. In effect, this also means that our code is also harder to maintain and further develop.</p>
<p>In addition to these drawbacks, it is also easy to introduce errors to our code when optimizing, and if we are not careful we get erroneous results.</p>
<p>There are therefore both benefits and drawbacks to optimizing code. You should therefore give some though to wether or not you even <em>want</em> to invest the time needed to properly optimize code, or wether you have code that is good enough for your current use cases.</p>
</div>
</div>
<div class="section" id="how-to-optimize">
<h2>How to Optimize<a class="headerlink" href="#how-to-optimize" title="Permalink to this headline">¶</a></h2>
<p>If you have decided that you <em>want</em> to optimize your code, it’s important to do so in a structured and organized manner, to ensure that we optimize things in an efficient manner. To do this, we will introduce some important techniques:</p>
<ul class="simple">
<li><p>Algorithm analysis to figure what the theoretical difference between different approaches is</p></li>
<li><p>Timing and benchmarking to figure out <em>how fast is the code actually</em>?</p></li>
<li><p>Profiling to understand <em>what parts of the code needs to be optimized</em></p></li>
</ul>
<p>We have already talked about algorithm analysis in this course, and here a big part of optimizing a program lies. By choosing a different algorithm or data structure to solve a specific problem, we can make our program a <em>lot</em> faster and scalable.</p>
<div class="figure align-default" id="writing-it-down">
<a class="reference internal image-reference" href="../../../_images/writing_it_down.jpg"><img alt="writing_it_down" src="../../../_images/writing_it_down.jpg" style="width: 700px;" /></a>
</div>
</div>
<div class="section" id="timing-and-benchmarking">
<h2>Timing and Benchmarking<a class="headerlink" href="#timing-and-benchmarking" title="Permalink to this headline">¶</a></h2>
<p>Timing code is a good way to explore wether the steps we take to optimize our code is <em>actually</em> making things faster. There are many tools available for timing code, in Python, the built-in <code class="docutils literal notranslate"><span class="pre">timeit</span></code> package is a good choice. In Jupyter and iPython there are additional tools for using <code class="docutils literal notranslate"><span class="pre">timeit</span></code> to explore code fast.</p>
<p>Let us look at an example. In <a class="reference external" href="https://stackoverflow.com/questions/327002/which-is-faster-in-python-x-5-or-math-sqrtx">this StackOverflow post</a> a user is wondering which is faster, using <code class="docutils literal notranslate"><span class="pre">math.sqrt(x)</span></code>, or simply writing <code class="docutils literal notranslate"><span class="pre">x**0.5</span></code> to compute the square root, or perhaps alternatively <code class="docutils literal notranslate"><span class="pre">pow(x,</span> <span class="pre">0.5)</span></code>.</p>
<p>Now, this user was wondering which was fastest, and so simply asked. In fact, in addition to asking on StackOverflow, he also emailed the question to Guido van Rossum, the original creator of Python.</p>
<p>The email To Guide:</p>
<blockquote>
<div><p>There are at least 3 ways to do a square root in Python: math.sqrt, the ‘**’ operator and pow(x,.5). I’m just curious as to the differences in the implementation of each of these. When it comes to efficiency which is better?</p>
</div></blockquote>
<p>Guido actually responded to this mail with the following answer</p>
<blockquote>
<div><p>pow and ** are equivalent; math.sqrt doesn’t work for complex numbers, and links to the C sqrt() function. As to which one is faster, I have no idea…</p>
</div></blockquote>
<p>The interesting point here is that even Guido, Python’s creator, doesn’t immediately know which is faster. So if we don’t know which option is fastest, and asking one of the top experts doesn’t help. How can we check?</p>
<p>Timeit can be used to simply <em>check</em> through experimentation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">23145</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> math.sqrt(x)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>87.7 ns ± 2.55 ns per loop (mean ± std. dev. of 7 runs, 10,000,000 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> x**0.5
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100 ns ± 2.92 ns per loop (mean ± std. dev. of 7 runs, 10,000,000 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> math.pow(x, 0.5)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>134 ns ± 6.28 ns per loop (mean ± std. dev. of 7 runs, 10,000,000 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> np.sqrt(x)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.13 µs ± 61.5 ns per loop (mean ± std. dev. of 7 runs, 1,000,000 loops each)
</pre></div>
</div>
</div>
</div>
<p>When we use <code class="docutils literal notranslate"><span class="pre">timeit</span></code>, the computer performs a numerical experiment. Simply repeating the call many times, and taking the average. The reason it repeats the code many times it that a single timing will be affected by <em>noise</em>. Timeit will itself decide how many calls to perform, depending on how long a single call takes. We can also force it to take a specific amount of loops, but this is often not necessary unless we want more fine control.</p>
<p>In our example, we only tried taking the square root of a single number, but let us instead try a large number of different numbers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sqrt_numbers_math</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20000</span><span class="p">):</span>
        <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">sqrt_numbers_exp</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20000</span><span class="p">):</span>
        <span class="n">x</span><span class="o">**</span><span class="mf">0.5</span>

<span class="k">def</span> <span class="nf">sqrt_numbers_pow</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20000</span><span class="p">):</span>
        <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">sqrt_numbers_np</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20000</span><span class="p">):</span>
        <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can also store the time from a call to <code class="docutils literal notranslate"><span class="pre">%timeit</span></code> in jupyter, if we append the <code class="docutils literal notranslate"><span class="pre">-o</span></code> flag:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_math</span> <span class="o">=</span> <span class="o">%</span><span class="k">timeit</span> -o sqrt_numbers_math()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.28 ms ± 130 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_exp</span> <span class="o">=</span> <span class="o">%</span><span class="k">timeit</span> -o sqrt_numbers_exp()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.31 ms ± 43.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_pow</span> <span class="o">=</span> <span class="o">%</span><span class="k">timeit</span> -o sqrt_numbers_pow()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.93 ms ± 91.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_np</span> <span class="o">=</span> <span class="o">%</span><span class="k">timeit</span> -o sqrt_numbers_np()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>23.4 ms ± 1.04 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p>By carrying out timing experiments, we get an explicit control of how long different approaches to the same problem takes. Here for example, we learn that <code class="docutils literal notranslate"><span class="pre">np.sqrt()</span></code> is significantly slower than the other options. This is because <code class="docutils literal notranslate"><span class="pre">np.sqrt()</span></code> is made for also taking the square root of large arrays, and so it is not the best option for taking the roots of single numbers.</p>
<p>Now, while <code class="docutils literal notranslate"><span class="pre">np.sqrt()</span></code> is significantly slower, it is still <em>fast</em>, so for a program that computes a square root less than a thousand times for example, using <code class="docutils literal notranslate"><span class="pre">np.sqrt()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">math.sqrt</span></code> won’t make a noticeable difference. But if we are computing millions upon millions of roots, then the speedup might be noticeable.</p>
<p>Performing your own timing experiments rather than googling “which is faster, x or y” is a good habit. For one thing is that the info you find might be outdated, or belong to a different setup. Perhaps you find results for Python 2, but you are using Python 3? Or something changed in the newer numpy version, which you are using? If you use timing experiments on your own machine, you get empirical evidence of your own situation,.</p>
<div class="section" id="timing-lines-functions-and-modules">
<h3>Timing lines, functions and modules<a class="headerlink" href="#timing-lines-functions-and-modules" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">timeit</span></code> package can be used to test single statements, functions, or entire programs/modules. Which it makes sense to focus on depends on the specific problem, and where in the optimization process you are.</p>
</div>
</div>
<div class="section" id="benchmarking">
<h2>Benchmarking<a class="headerlink" href="#benchmarking" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference external" href="https://en.wikipedia.org/wiki/Benchmark_%28computing%29"><em>benchmark</em></a> is a specific test case one can use to test different solutions to a problem, or different codes. You can create your own benchmark test before you start optimizing, so you have something specific to work up against. The important thing is to test the different versions of the code against the <em>same benchmark</em>. If you keep changing your benchmark along with your code, then you cannot have a proper handle on how the different versions of your code performs.</p>
<p>Benchmarks are also often formulated and then shared openly, as sort of a challenge to different people in the community. To have a publicly formulated benchmark makes it easier for different people to compare their solutions to a given problem against each other. This is especially true in computer hardware, where different CPU’s and GPU’s for example, are tested against different benchmarks to <em>rate</em> them against specific sources.</p>
</div>
<div class="section" id="profiling">
<h2>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h2>
<p>There is a rule of thumb in programming, called the 90-10 rule, which states that a program usually spends more than 90% of its time in less than 10% of the code. This has important consequences for how we should optimize a program. If you want to make a program more efficient, you should just open up the code, and go through it line by line looking for places to improve the speed. Because most of the code is not where the program spends a majority of its time, we are simply inefficient in where we use our time to optimize.</p>
<p>Instead, we should identify the portions of the program that hogs the majority of the execution time of our program. These are normally called the <em>bottlenecks</em> of a program. Before you even start to think about optimizing code, you should identify the bottlenecks. Now, you can make guesses of where these are, they will for example often be inside loops, because the contents of loops gets repeated many times.</p>
<p>However, research shows that most programmers, even very experienced programmers, are quite terrible at guessing at what parts of a program are the most inefficient. Except for the simplest cases, we cannot simply look at a code and say where the bottlenecks are. Therefore we turn to an important tool: Profiling.</p>
<p>A Profile is much like a timing experiment carried out on a function or a module. However, in addition to timing the total run-time, it keeps track of <em>where</em> in the code the different time is spent. This gives us information about the bottle necks.</p>
<div class="section" id="example-the-drunkard-s-walk">
<h3>Example: The Drunkard’s Walk<a class="headerlink" href="#example-the-drunkard-s-walk" title="Permalink to this headline">¶</a></h3>
<p>The following code models a random walker that takes random steps until it reaches some predefined position called “home”. This problem is often known as the <em>Drunkards walk</em>, as it models a drunk person rambling until they get home and pass out.</p>
<p>We implement it in an object oriented manner.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">class</span> <span class="nc">DrunkardsWalk</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">home</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">home</span> <span class="o">=</span> <span class="n">home</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_at_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">home</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">walk_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_at_home</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">drunkard</span> <span class="o">=</span> <span class="n">DrunkardsWalk</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">steps</span> <span class="o">=</span> <span class="n">drunkard</span><span class="o">.</span><span class="n">walk_home</span><span class="p">()</span>
<span class="n">drunkard</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">drunkard</span><span class="o">.</span><span class="n">steps</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/software_optimization_15_0.png" src="../../../_images/software_optimization_15_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>52183
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">walker</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">drunkard</span> <span class="o">=</span> <span class="n">DrunkardsWalk</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">drunkard</span><span class="o">.</span><span class="n">walk_home</span><span class="p">()</span>
    <span class="n">drunkard</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/software_optimization_16_0.png" src="../../../_images/software_optimization_16_0.png" />
</div>
</div>
<p>Let us profile this code. In Python, a standard package for profiling is <code class="docutils literal notranslate"><span class="pre">cProfile</span></code>, which should come pre-packaged with your python installation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cProfile</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">100122</span><span class="p">)</span>
<span class="n">cProfile</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;DrunkardsWalk(100).walk_home()&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>         4310769 function calls in 4.125 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
   862153    0.104    0.000    0.104    0.000 3439088668.py:10(position)
        1    0.000    0.000    0.000    0.000 3439088668.py:14(steps)
   862153    0.303    0.000    0.407    0.000 3439088668.py:18(is_at_home)
   862152    0.756    0.000    3.295    0.000 3439088668.py:21(step)
        1    0.415    0.415    4.117    4.117 3439088668.py:25(walk_home)
        1    0.000    0.000    0.000    0.000 3439088668.py:5(__init__)
        1    0.008    0.008    4.125    4.125 &lt;string&gt;:1(&lt;module&gt;)
        1    0.000    0.000    4.125    4.125 {built-in method builtins.exec}
        1    0.000    0.000    0.000    0.000 {built-in method builtins.len}
   862152    0.106    0.000    0.106    0.000 {method &#39;append&#39; of &#39;list&#39; objects}
        1    0.000    0.000    0.000    0.000 {method &#39;disable&#39; of &#39;_lsprof.Profiler&#39; objects}
   862152    2.434    0.000    2.434    0.000 {method &#39;randint&#39; of &#39;numpy.random.mtrand.RandomState&#39; objects}
</pre></div>
</div>
</div>
</div>
<p>The output from cProfile shows the time used by the different functions of the program. For each function, a row is printed. The name of the function is shown on the right-most side. The other columns show different information</p>
<ul class="simple">
<li><p><strong>ncalls</strong>: The number of times the function is called</p></li>
<li><p><strong>tottime</strong>: Time spent inside the function without sub-functions it calls</p></li>
<li><p><strong>cumtime</strong>: Time spent inside the function <em>and</em> inside functions it calls</p></li>
<li><p><strong>per call</strong>: The time divided by number of calls</p></li>
</ul>
<p>To understand which parts of the code are the slowest, we need to look down the <code class="docutils literal notranslate"><span class="pre">tottime</span></code> column and find the biggest number. Here the three biggest are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">randint()</span></code> with 1.091 seconds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">step()</span></code> with 0.446 seconds</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">walk_home()</span></code> with 0.282 seconds</p></li>
</ul>
<p>At the top it says the total time of execution as 2.139 seconds, and so <code class="docutils literal notranslate"><span class="pre">randint()</span></code> uses about half of our programs execution time.</p>
<p>Note also that there are some rows to functions that are technical, such as <code class="docutils literal notranslate"><span class="pre">method</span> <span class="pre">'disable'</span> <span class="pre">of</span> <span class="pre">'_lsprof.Profiler'</span> <span class="pre">objects</span></code>, which you can simply ignore.</p>
</div>
<div class="section" id="more-on-cprofile">
<h3>More on cProfile<a class="headerlink" href="#more-on-cprofile" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">cProfile</span></code> package is a good tool for performing <em>function profiling</em> in Python. This means it explores how much time different functions spend. To get more control on how to analyze the outputs of <code class="docutils literal notranslate"><span class="pre">cProfile</span></code>, instead of just writing out a big table, we can use the <code class="docutils literal notranslate"><span class="pre">pstats</span></code> package (“profiling stats”). You can read more about <code class="docutils literal notranslate"><span class="pre">cProfile</span></code> and <code class="docutils literal notranslate"><span class="pre">pstats</span></code> on the official <a class="reference external" href="https://docs.python.org/3/library/profile.html">Python documentation here</a>.</p>
</div>
</div>
<div class="section" id="line-profiling">
<h2>Line Profiling<a class="headerlink" href="#line-profiling" title="Permalink to this headline">¶</a></h2>
<p>An alternative to <em>function profiling</em> with cProfile, is to <em>line profile</em>. This means it divides the time use of your program into each separate line. The benefit of line profiling is that it doesn’t just tell you which function is slow, but exactly where inside a function which is slow.</p>
<p>To do line profiling in Python, you can use the <code class="docutils literal notranslate"><span class="pre">line_profiler</span></code> package. This needs to be installed. If you are using an anaconda installation, install it by writing:</p>
<ul class="simple">
<li><p>Anaconda Python: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">line_profiler</span></code></p></li>
</ul>
<p>Otherwise, install it using pip:</p>
<ul class="simple">
<li><p>Other Pythons: <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">line_profiler</span></code></p></li>
</ul>
<p>To use <code class="docutils literal notranslate"><span class="pre">line_profiler</span></code> inside a notebook, we need to load it as an external tool</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> line_profiler
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lpres</span> <span class="o">=</span> <span class="o">%</span><span class="k">lprun</span> -r -f DrunkardsWalk.step -f DrunkardsWalk.walk_home DrunkardsWalk(100).walk_home()
</pre></div>
</div>
</div>
</div>
<p>Here we are telling <code class="docutils literal notranslate"><span class="pre">line_profile</span></code> to run the statement <code class="docutils literal notranslate"><span class="pre">DrunkardWalk(100).walk_home()</span></code> and analyze the performance of the two explicitly mentioned functions. The output pop up in a separate window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Timer</span> <span class="n">unit</span><span class="p">:</span> <span class="mf">1e-06</span> <span class="n">s</span>

<span class="n">Total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">3.18336</span> <span class="n">s</span>
<span class="n">File</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">75</span><span class="o">-</span><span class="n">b157087bcb36</span><span class="o">&gt;</span>
<span class="n">Function</span><span class="p">:</span> <span class="n">step</span> <span class="n">at</span> <span class="n">line</span> <span class="mi">21</span>

<span class="n">Line</span> <span class="c1">#      Hits         Time  Per Hit   % Time  Line Contents</span>
<span class="o">==============================================================</span>
    <span class="mi">21</span>                                               <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="mi">22</span>   <span class="mi">1366246</span>    <span class="mf">2600136.0</span>      <span class="mf">1.9</span>     <span class="mf">81.7</span>          <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="mi">23</span>   <span class="mi">1366246</span>     <span class="mf">583225.0</span>      <span class="mf">0.4</span>     <span class="mf">18.3</span>          <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

<span class="n">Total</span> <span class="n">time</span><span class="p">:</span> <span class="mf">5.77839</span> <span class="n">s</span>
<span class="n">File</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">75</span><span class="o">-</span><span class="n">b157087bcb36</span><span class="o">&gt;</span>
<span class="n">Function</span><span class="p">:</span> <span class="n">walk_home</span> <span class="n">at</span> <span class="n">line</span> <span class="mi">25</span>

<span class="n">Line</span> <span class="c1">#      Hits         Time  Per Hit   % Time  Line Contents</span>
<span class="o">==============================================================</span>
    <span class="mi">25</span>                                               <span class="k">def</span> <span class="nf">walk_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="mi">26</span>   <span class="mi">1366247</span>    <span class="mf">1015881.0</span>      <span class="mf">0.7</span>     <span class="mf">17.6</span>          <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_at_home</span><span class="p">():</span>
    <span class="mi">27</span>   <span class="mi">1366246</span>    <span class="mf">4762509.0</span>      <span class="mf">3.5</span>     <span class="mf">82.4</span>              <span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
    <span class="mi">28</span>         <span class="mi">1</span>          <span class="mf">3.0</span>      <span class="mf">3.0</span>      <span class="mf">0.0</span>          <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps</span>
</pre></div>
</div>
<p>So we can see that line 22, increment the position itself, takes up 81.7% of the time it takes to use the <code class="docutils literal notranslate"><span class="pre">step()</span></code> method. Perhaps we can improve this by vectorizing with numpy? Appending the elements to the history takes 20% of the time, which is also a considerable amount. Perhaps it would be better to initialize an empty array and then just update the elements?</p>
</div>
<div class="section" id="memory-optimization">
<span id="software-optimization-memory-optimization"></span><h2>Memory optimization<a class="headerlink" href="#memory-optimization" title="Permalink to this headline">¶</a></h2>
<p>One of the main optimizations that was added to the python language in the transition from python 2 to python 3 was that</p>
</div>
<div class="section" id="taking-a-step-back-the-rules-of-optimization">
<h2>Taking a step back: The Rules of Optimization<a class="headerlink" href="#taking-a-step-back-the-rules-of-optimization" title="Permalink to this headline">¶</a></h2>
<p>We are now out of time for this lecture. And we will return to a specific example of optimization in the next lecture. For now, let us take a step back and focus on the big picture again.</p>
<p>We have taken time to discuss that if one wants to optimize, one should do so after getting the code to work properly, and making it elegant. Even then, we should take time to weigh the pros and cons and see if we actually want to optimize our code before starting.</p>
<p>If we start optimizing, we should also first get a proper handle of the bottlenecks of the program and focus on those, leaving the rest of the code alone.</p>
<p>This is summarized by what is called the <a class="reference external" href="http://wiki.c2.com/?RulesOfOptimization"><em>rules of optimization</em></a></p>
<ol class="simple">
<li><p>The first rule of optimization: Don’t do it.</p></li>
<li><p>The second rule of optimization: Don’t do it… yet.</p></li>
<li><p>The third rule of optimization: Profile before optimizing!</p></li>
</ol>
<div class="section" id="the-root-of-all-evil">
<h3>The root of all evil<a class="headerlink" href="#the-root-of-all-evil" title="Permalink to this headline">¶</a></h3>
<p>A famous quote in programming is called <em>the root of all evil</em>, and was made by Donald Knuth:</p>
<blockquote>
<div><p>Programmers waste enormous amounts of time thinking about, or worrying about, the speed of noncritical parts of their programs, and these attempts at efficiency actually have a strong negative impact when debugging and maintenance are considered. We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil. Yet we should not pass up our opportunities in that critical 3%.”</p>
</div></blockquote>
<p>Knuth is remarking on rule <em>3</em>, that one should not try to optimize one’s entire program, but just the critical 3%. The quote is often shortened to simply <em>“premature optimization is the root of all evil</em>, which also neatly summarized the fact that rule we started with: First make it work, then make it elegant, lastly make it fast. If you start optimizing while solving the problem for the first time, you are <em>prematurely optimizing</em>.</p>
<div class="figure align-default" id="xkcd1691">
<a class="reference internal image-reference" href="../../../_images/xkcd1691.png"><img alt="xkcd1691" src="../../../_images/xkcd1691.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 49 </span><span class="caption-text"><strong>Source:</strong> <a class="reference external" href="https://xkcd.com/1691/">XKCD #1691</a></span><a class="headerlink" href="#xkcd1691" title="Permalink to this image">¶</a></p>
</div>
<p>As an ending thought: We might seem overly harsh on optimizing code in this lecture. However, we <strong>do</strong> think optimization is important and that it <strong>should be done</strong>. We are simply trying to point out that there is a <em>time</em> and a <em>place</em> for optimization. In addition it should be done in a structured, systematic manner.</p>
<p>Some take quotes like <em>“premature optimization is the root of all evil”</em> too much to heart and forgo optimization altogether, however, this is also far from ideal, which the full quote actually addresses! However, some people think the quote is used to justify laziness and bad practices, leading some to claim that:</p>
<blockquote>
<div><p>“Premature optimization is the root of all evil” is the root of evil. <a class="reference external" href="https://medium.com/&#64;okaleniuk/premature-optimization-is-the-root-of-all-evil-is-the-root-of-evil-a8ab8056c6b">Source</a></p>
</div></blockquote>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "finsberg/IN1910_H22",
            ref: "gh-pages",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./docs/lectures/optimization"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="optimization.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Software optimization and parallelism</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="optimization_and_mixed_programming.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Optimization and Mixed Programming</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Jonas van den Brink, Henrik Finsberg, Kristian G. Hustad, and Joakim Sundnes<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>