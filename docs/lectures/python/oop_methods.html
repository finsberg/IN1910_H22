
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Methods in Python &#8212; IN1910 - Programming with Scientific Applications</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Designing Object-Oriented Programs" href="oop_concepts.html" />
    <link rel="prev" title="Introduction to Object-Oriented Programming" href="intro_to_oop.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">IN1910 - Programming with Scientific Applications</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../README.html">
   IN1910 – Programming with Scientific Applications
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  General information
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/overview.html">
   Overview of lectures and exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/curriculum.html">
   Curriculum
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/motivation.html">
   The motivation behind IN1910
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/exam.html">
   Project Work, Grading and Exam
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../info/help.html">
   Getting help or giving feedback
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Setting up your computer for IN1910
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../setup/setup.html">
   Installation instructions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../setup/cpp_compiler.html">
   Installing a C++ compiler
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lecture videos
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../videos/videos_H21.html">
   Lecture videos from H21
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../videos/videos_H20.html">
   Lecture videos from H20
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../videos/videos_H19.html">
   Lecture videos from H19
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="python_intro.html">
   A quick Python refresher
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="python_oop.html">
   Object-oriented programming in Python
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="intro_to_oop.html">
     Introduction to Object-Oriented Programming
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Methods in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="oop_concepts.html">
     Designing Object-Oriented Programs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functional_programming.html">
   Functional programming in python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../git/version_control_with_git.html">
   Version Control with Git
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python_development/python_development.html">
   Python development
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_development/writing_functioning_code.html">
     Writing Reliable Software
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_development/codestyle_and_docstrings.html">
     Code Style and Documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_development/type_annotations.html">
     Type annotations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_development/debugging.html">
     Debugging in python
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../cpp/cpp.html">
   C++
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/intro_to_cpp.html">
     An introduction to C++
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/arrays_and_pointers.html">
     Arrays, Memory and Pointers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/oop_in_cpp.html">
     Object-oriented Programming in C++
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/dynamic_allocation.html">
     More on pointers and arrays and dynamic allocation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/cpptools.html">
     C++ tips and tricks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/arraylist.html">
     Dynamic Arrays, aka, Array Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/linked_lists.html">
     Linked Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/algorithm_analysis.html">
     Algorithm Analysis and Big Oh Notation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/linkedlists_vs_dynamicarrays.html">
     Comparing Linked Lists and Dynamic Arrays
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/sorting.html">
     Sorting Algorithms
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../stochastic_processes/stochastic_processes.html">
   Stochastic processes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/random_number_generators.html">
     Random Number Generators and Seeding
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/using_random_numbers.html">
     Using Random Numbers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/random_walks_and_markov_processes.html">
     Random Walks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/solving_the_1D_diffusion_equation.html">
     Solving the 1D Diffusion Equation using Finite Differences
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../stochastic_processes/markov_chains.html">
     Markov processes and Markov chains
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../optimization/optimization.html">
   Software optimization and parallelism
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../optimization/software_optimization.html">
     Software Optimization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../optimization/optimization_and_mixed_programming.html">
     Optimization and Mixed Programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../optimization/parallel_programming.html">
     Parallel Programming
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../summary/course_summary.html">
   Course Summary
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <a href="https://www.uio.no/studier/emner/matnat/ifi/IN1910/h22/index.html">Course homepage at UiO</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../../../_sources/docs/lectures/python/oop_methods.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/docs/lectures/python/oop_methods.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/finsberg/IN1910_H22/issues/new?title=Issue%20on%20page%20%2Fdocs/lectures/python/oop_methods.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/finsberg/IN1910_H22/gh-pages?urlpath=tree/_sources/docs/lectures/python/oop_methods.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://hub2.jupyterhub.uio.no/hub/user-redirect/git-pull?repo=https://github.com/finsberg/IN1910_H22&urlpath=tree/IN1910_H22/_sources/docs/lectures/python/oop_methods.md&branch=gh-pages"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#attributes-fields-methods">
   Attributes, Fields, Methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-methods">
   Special Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-constructor-init">
     The constructor (
     <code class="docutils literal notranslate">
      <span class="pre">
       __init__
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#printing-out-instances-of-custom-classes">
     Printing out instances of custom classes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#making-callable-objects">
     Making callable objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-special-methods">
     More Special Methods
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-methods-and-variables">
   Class Methods and Variables
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#three-common-uses-of-class-variables-and-class-methods-are">
     Three common uses of class variables and class methods are:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parameters-as-class-variables">
     Parameters as class variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-methods">
   Class Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-factory-method-use-cases">
     Other factory method use cases
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#static-methods">
   Static Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-methods-vs-static-methods-1">
     Class Methods vs Static Methods (1)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-methods-vs-static-methods-2">
     Class Methods vs Static Methods (2)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-methods-vs-static-methods-3">
     Class Methods vs Static Methods (3)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quiz-why-is-this-factory-method-a-classmethod-not-a-staticmethod">
       Quiz: why is this factory method a @classmethod, not a @staticmethod?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#answer">
       Answer:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-3d-vector-class">
   A 3D vector class
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     The constructor (
     <code class="docutils literal notranslate">
      <span class="pre">
       __init__
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pretty-printing">
     Pretty printing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-repr-method">
     The repr method
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vector-arithmetic">
   Vector Arithmetic
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#addition">
     Addition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#self-and-other">
     <code class="docutils literal notranslate">
      <span class="pre">
       self
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       other
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vector-scalar-addition">
     Vector-scalar addition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#subtraction">
     Subtraction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-unary-negative-operator-aka-minus">
     The unary negative operator (aka “minus”)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multiplying-vectors">
     Multiplying vectors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scalar-multiplication">
     Scalar multiplication
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-properties-to-our-class-length">
     Adding ‘properties’ to our class (Length)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#normalization">
     Normalization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#copy-method">
     Copy method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alternative-constructor-creating-a-canonical-unit-vector">
     Alternative constructor - Creating a canonical unit vector
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#other-special-methods">
       Other Special methods
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#short-introduction-to-inheritance">
   Short introduction to inheritance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-pokemon-go">
     Example: Pokémon Go
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Methods in Python</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#attributes-fields-methods">
   Attributes, Fields, Methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-methods">
   Special Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-constructor-init">
     The constructor (
     <code class="docutils literal notranslate">
      <span class="pre">
       __init__
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#printing-out-instances-of-custom-classes">
     Printing out instances of custom classes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#making-callable-objects">
     Making callable objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-special-methods">
     More Special Methods
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-methods-and-variables">
   Class Methods and Variables
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#three-common-uses-of-class-variables-and-class-methods-are">
     Three common uses of class variables and class methods are:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parameters-as-class-variables">
     Parameters as class variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#class-methods">
   Class Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-factory-method-use-cases">
     Other factory method use cases
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#static-methods">
   Static Methods
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-methods-vs-static-methods-1">
     Class Methods vs Static Methods (1)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-methods-vs-static-methods-2">
     Class Methods vs Static Methods (2)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-methods-vs-static-methods-3">
     Class Methods vs Static Methods (3)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#quiz-why-is-this-factory-method-a-classmethod-not-a-staticmethod">
       Quiz: why is this factory method a @classmethod, not a @staticmethod?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#answer">
       Answer:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-3d-vector-class">
   A 3D vector class
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     The constructor (
     <code class="docutils literal notranslate">
      <span class="pre">
       __init__
      </span>
     </code>
     )
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pretty-printing">
     Pretty printing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-repr-method">
     The repr method
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vector-arithmetic">
   Vector Arithmetic
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#addition">
     Addition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#self-and-other">
     <code class="docutils literal notranslate">
      <span class="pre">
       self
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       other
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vector-scalar-addition">
     Vector-scalar addition
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#subtraction">
     Subtraction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-unary-negative-operator-aka-minus">
     The unary negative operator (aka “minus”)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multiplying-vectors">
     Multiplying vectors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scalar-multiplication">
     Scalar multiplication
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-properties-to-our-class-length">
     Adding ‘properties’ to our class (Length)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#normalization">
     Normalization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#copy-method">
     Copy method
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alternative-constructor-creating-a-canonical-unit-vector">
     Alternative constructor - Creating a canonical unit vector
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#other-special-methods">
       Other Special methods
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#short-introduction-to-inheritance">
   Short introduction to inheritance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-pokemon-go">
     Example: Pokémon Go
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="methods-in-python">
<h1>Methods in Python<a class="headerlink" href="#methods-in-python" title="Permalink to this headline">¶</a></h1>
<p>In this section we will talk about methods, aka functions that lives on the instance or the class. We will see that there are a number of ways that you can defined methods on a class and you should use them in different situations.</p>
<div class="section" id="attributes-fields-methods">
<h2>Attributes, Fields, Methods<a class="headerlink" href="#attributes-fields-methods" title="Permalink to this headline">¶</a></h2>
<p>Classes are custom data types, and are extremely central to object-oriented programming. When you are developing object-oriented code, most of your development will go into defining classes and how they interact.</p>
<p>When defining a new class, you need to specify what data an object of that type should contain, and what functionality it has. We call these the <em>attributes</em> of the class/object, and these can be split into two main groups:</p>
<ul class="simple">
<li><p><em>fields</em> are pieces of data stored in the object</p></li>
<li><p><em>methods</em> are functions we can call</p></li>
</ul>
<p>In Python we use the dot-syntax to access an objects attributes. For example</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">conjugate</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.0
3.0
(4-3j)
</pre></div>
</div>
</div>
</div>
<p>Here we create a <code class="docutils literal notranslate"><span class="pre">complex</span></code>-type object, which represents a complex number. We can then access its real and imaginary components using the names <code class="docutils literal notranslate"><span class="pre">x.real</span></code> and <code class="docutils literal notranslate"><span class="pre">x.imag</span></code>. These are examples of attributes of object, in this case these are <code class="docutils literal notranslate"><span class="pre">float</span></code> attributes, which in turn are examples of data fields.</p>
<p>Last we use <code class="docutils literal notranslate"><span class="pre">x.conjugate()</span></code>, and this is also a class attribute - but in this case the attribute is callable and will behave as a function. Such attributes we call <em>methods</em> in Python. In this case the method returns the complex conjugate of the object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">real</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">conjugate</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;float&#39;&gt;
&lt;class &#39;builtin_function_or_method&#39;&gt;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="special-methods">
<h2>Special Methods<a class="headerlink" href="#special-methods" title="Permalink to this headline">¶</a></h2>
<p>In Python, defining classes often involve implementing <em>special</em> methods, also known as <em>magic</em> methods (or dunder methods). These are methods we do not expect to call explicitly. Rather, we expect Python to call them for us as needed, depending on the situation. They are extremely useful to learn how to use, and they lead to elegant, understandable and usable code. Becoming adept at special methods is crucial if you want to make good Pythonic code.</p>
<p>Special methods have specific names, so Python knows what to call. They all use two leading and two trailing underscores. You have already seen an example of this, the constructor: <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.</p>
<div class="section" id="the-constructor-init">
<h3>The constructor (<code class="docutils literal notranslate"><span class="pre">__init__</span></code>)<a class="headerlink" href="#the-constructor-init" title="Permalink to this headline">¶</a></h3>
<p>You have already seen the most important example of special methods, the constructor, or initialization special method (<code class="docutils literal notranslate"><span class="pre">__init__</span></code>). This function is called every time you define a new instance of a class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>


<span class="k">class</span> <span class="nc">Sphere</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">3</span>


<span class="n">football</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A football of radius </span><span class="si">{</span><span class="n">football</span><span class="o">.</span><span class="n">radius</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> cm&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Has a surface area of </span><span class="si">{</span><span class="n">football</span><span class="o">.</span><span class="n">area</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> cm^2&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;And a volume of </span><span class="si">{</span><span class="n">football</span><span class="o">.</span><span class="n">volume</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> cm^3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A football of radius 11 cm
Has a surface area of 1521 cm^2
And a volume of 5575 cm^3
</pre></div>
</div>
</div>
</div>
<p>Once we define a new instance of the class, the <code class="docutils literal notranslate"><span class="pre">__init__</span></code>-method is called behind the scenes. As usual, the first argument is called “self”, because this will be the object itself. In addition we send in any additional arguments we need to define an object of the given class. In this example we define a sphere-object, and so we send in the radius as an argument. In our constructor we then choose to store the radius as a data attribute by writing</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [4],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>

<span class="ne">NameError</span>: name &#39;radius&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>This code line might look a bit weird, but here we are defining the instance property <code class="docutils literal notranslate"><span class="pre">football.radius</span></code>, and setting the value to be the same as the function argument (<code class="docutils literal notranslate"><span class="pre">11</span></code>). In addition to storing the radius, we have chosen to also compute the area and volume of the sphere, and store these as attributes as well.</p>
</div>
<div class="section" id="printing-out-instances-of-custom-classes">
<span id="python-oop-special-print"></span><h3>Printing out instances of custom classes<a class="headerlink" href="#printing-out-instances-of-custom-classes" title="Permalink to this headline">¶</a></h3>
<p>If you attempt to call <code class="docutils literal notranslate"><span class="pre">print</span></code> on a custom object, you’ll find that it doesn’t produce output that is super helpful.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">football</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;__main__.Sphere object at 0x7fa8954f7100&gt;
</pre></div>
</div>
</div>
</div>
<p>Reading the output we get out the type, in this case <code class="docutils literal notranslate"><span class="pre">__main__.Sphere</span></code> (main because we defined it in our main script, and didn’t import it), it tells us it is an object, and then it specifies where in memory the object is stored. The object type can in many cases be useful information, but you could already get this information by using the <code class="docutils literal notranslate"><span class="pre">type()</span></code> function.</p>
<p>To print more useful information, we can implement the string special method (<code class="docutils literal notranslate"><span class="pre">__str__</span></code>). This special method is called automatically for us when we try to turn our custom object into a string by writing <code class="docutils literal notranslate"><span class="pre">str(u)</span></code>. In addition, when we call <code class="docutils literal notranslate"><span class="pre">print(u)</span></code>, Python actually first converts the object to a string behind the scenes before printing it (unlike for example <code class="docutils literal notranslate"><span class="pre">sys.stdout.write</span></code>, where you have to do it manually). So if we implement <code class="docutils literal notranslate"><span class="pre">Football.__str__</span></code> we would get the following happening behind the scenes</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">print(football)</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">print(str(football))</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">print(football.__str__())</span></code></p></li>
</ul>
<p>This means: if we implement a <code class="docutils literal notranslate"><span class="pre">__str__</span></code> that returns a nicely formatted string, we can print our object exactly the way we want it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>


<span class="k">class</span> <span class="nc">Sphere</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Sphere(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="si">}</span><span class="s2">)&quot;</span>


<span class="n">football</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">football</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sphere(11)
</pre></div>
</div>
</div>
</div>
<p>A different special method that is similar to the string method is the representation special method (<code class="docutils literal notranslate"><span class="pre">__repr__</span></code>). The main difference is that <code class="docutils literal notranslate"><span class="pre">__str__</span></code> is meant to be human readable, so that it works with <code class="docutils literal notranslate"><span class="pre">print()</span></code>. This means that <code class="docutils literal notranslate"><span class="pre">__str__</span></code> can be informal, and ambiguous, as long as it is somewhat informative.</p>
<p>On the other hand we have <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>, which is meant to be unambiguous and more formal. It should be a unique representation of the object so that it could be used to recreate that object later. When calling <code class="docutils literal notranslate"><span class="pre">repr(u)</span></code> we should get a string that we for example can write to a file, then later load in and execute that statement to get the object back. So <code class="docutils literal notranslate"><span class="pre">eval(repr(u))</span></code> should give <code class="docutils literal notranslate"><span class="pre">u</span></code>.</p>
<p>The repr special method is also called when printing out elements inside a list for example, so if we write out our football inside a list, the output will be as before, despite having implemented a str-method. To fix this we would need to add a repr instead, or in addition to, the str-method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list_of_spheres</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sphere</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_of_spheres</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;__main__.Sphere object at 0x7fa8901bff70&gt;, &lt;__main__.Sphere object at 0x7fa8901cd720&gt;, &lt;__main__.Sphere object at 0x7fa8901ce200&gt;]
</pre></div>
</div>
</div>
</div>
<p>Now let us implement the <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> method</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>


<span class="k">class</span> <span class="nc">Sphere</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Sphere(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here we use a quick little trick. Because we don’t really want <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__str__</span></code> to produce any different output, we simply let <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> use the string special method by writing <code class="docutils literal notranslate"><span class="pre">self(str)</span></code>. Using methods internally when defining classes is very common, and can save us a lot of hassle</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list_of_spheres</span> <span class="o">=</span> <span class="p">[</span><span class="n">Sphere</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">list_of_spheres</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Sphere(0), Sphere(5), Sphere(10)]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="making-callable-objects">
<h3>Making callable objects<a class="headerlink" href="#making-callable-objects" title="Permalink to this headline">¶</a></h3>
<p>Another important special method is the <em>call</em> method (<code class="docutils literal notranslate"><span class="pre">__call__</span></code>). If a class has an implemented call method, we can call a given object as though it were a function. This is because Python automatically will use the call-method behind the scenes. This is extremely useful when we want to create objects that represent mathematical functions.</p>
<p>Say for example we want to make a class for quadratic functions, which can be written as</p>
<div class="math notranslate nohighlight">
\[
f(x) = ax^2 + bx + c.
\]</div>
<p>Here, there a three free parameters, the coefficients <span class="math notranslate nohighlight">\(a\)</span>, <span class="math notranslate nohighlight">\(b\)</span>, and <span class="math notranslate nohighlight">\(c\)</span>. We therefore let the constructor take these in. We then implement the mathematical function itself as the call special method:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Quadratic</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">c</span>


<span class="n">f</span> <span class="o">=</span> <span class="n">Quadratic</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
<p>Here, when we assign <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">=</span> <span class="pre">Quadratic(1,</span> <span class="pre">2,</span> <span class="pre">1)</span></code>, we are creating a new object of the class that represents the function <span class="math notranslate nohighlight">\(f(x) = x^2 + 2x + 1\)</span>. It isn’t actually a Python function, but it is <em>callable</em>. We can therefore use it as if it were a normal function and call it by writing <code class="docutils literal notranslate"><span class="pre">f(4)</span></code>. When we write this, Python interprets it behind-the-scenes as</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f(4)</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">f.__call__(4)</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Quadratic.__call__(f,</span> <span class="pre">4)</span></code></p></li>
</ul>
<p>We can now easily create quadratic functions and use them as normal functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Quadratic</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">Quadratic</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">Quadratic</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/oop_methods_21_0.png" src="../../../_images/oop_methods_21_0.png" />
</div>
</div>
<p>There are several advantages to implementing these quadratic functions as actual Quadratic-objects, rather than as normal Python functions. For one, they now have a custom type, which we can check using <code class="docutils literal notranslate"><span class="pre">isinstance(f,</span> <span class="pre">Quadratic)</span></code>. Thus, other parts of our code can <em>know</em> that the function is a quadratic function. We can also extend the class adding plenty of useful functionality. We could for example add functionality for adding or subtracting functions, producing new Quadratic-objects. This cannot be done with normal functions. Or we could add a method for returning the derivative. If you do this week’s exercises, you will get the chance to implement all of these for a general degree polynomial.</p>
</div>
<div class="section" id="more-special-methods">
<h3>More Special Methods<a class="headerlink" href="#more-special-methods" title="Permalink to this headline">¶</a></h3>
<p>So far, we have shown the following special methods</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__init__</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__str__</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__repr__</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__call__</span></code></p></li>
</ul>
<p>These are just a few of many, many possible special methods you can implement. We will look at more example in the next lecture. For a more comprehensive list and more examples, you can check out <a class="reference external" href="http://www.diveintopython3.net/special-method-names.html">this site</a>.</p>
</div>
</div>
<div class="section" id="class-methods-and-variables">
<h2>Class Methods and Variables<a class="headerlink" href="#class-methods-and-variables" title="Permalink to this headline">¶</a></h2>
<p>In most examples we have seen in the course so far, we first implement a class, and then create <em>instances</em> of that class, i.e., objects of that class type. However, once created, these objects do not affect each other directly, they are simply the same type of object.</p>
<p>However, it is possible to create variables that belong to the <em>class</em>, and not specific objects.</p>
<div class="section" id="three-common-uses-of-class-variables-and-class-methods-are">
<h3>Three common uses of class variables and class methods are:<a class="headerlink" href="#three-common-uses-of-class-variables-and-class-methods-are" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>To keep track of the number of objects created of a class</p></li>
<li><p>To store global parameters, that should be the same for all instances</p></li>
<li><p>So-called ‘factory methods’, which creates new objects in different ways than what is commonly done in the constructor</p></li>
</ul>
<p>For the first example, we simply keep a counter running that increases every time we create a new object of the class:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Rabbit</span><span class="p">:</span>
    <span class="n">nr_of_rabbits</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="n">Rabbit</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Rabbit</span><span class="o">.</span><span class="n">nr_of_rabbits</span><span class="p">)</span>

<span class="n">alice</span> <span class="o">=</span> <span class="n">Rabbit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">buddy</span> <span class="o">=</span> <span class="n">Rabbit</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">charlie</span> <span class="o">=</span> <span class="n">Rabbit</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Rabbit</span><span class="o">.</span><span class="n">nr_of_rabbits</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
3
</pre></div>
</div>
</div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">nr_of_rabbits</span></code> is a class variable, because it belongs to the class itself. The <code class="docutils literal notranslate"><span class="pre">age</span></code> attributes however, are <em>instance</em> variables, as they belong to each individual instance of the class. In the constructor of the class, we increment <code class="docutils literal notranslate"><span class="pre">Rabbit.nr_of_rabbits</span></code> by 1, thus, each time a new rabbit object is created, this variable grows.</p>
<p>Note that even though there is no <em>instance</em> variable called <code class="docutils literal notranslate"><span class="pre">nr_of_rabbits</span></code>, we can access it from the objects too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">alice</span><span class="o">.</span><span class="n">nr_of_rabbits</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<p>This is because when we write <code class="docutils literal notranslate"><span class="pre">alice.nr_of_rabbits</span></code>, Python first checks for a instance variable by this name, but if none is found, like in this case, then it instead uses the class variable.</p>
<p>However, you should be a bit careful here, because if we try to redefine <code class="docutils literal notranslate"><span class="pre">alice.nr_of_rabbits</span></code> (or <code class="docutils literal notranslate"><span class="pre">self.nr_of_rabbits</span></code> inside the constructor), then we actually create an instance variable, rather than change the class variable. This is why we write <code class="docutils literal notranslate"><span class="pre">Rabbit.nr_of_rabbits</span> <span class="pre">+=</span> <span class="pre">1</span></code>, rather than self. Let us try the other version and see what happens:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Rabbit</span><span class="p">:</span>
    <span class="n">nr_of_rabbits</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Intentionally wrong!</span>


<span class="n">alice</span> <span class="o">=</span> <span class="n">Rabbit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">buddy</span> <span class="o">=</span> <span class="n">Rabbit</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">charlie</span> <span class="o">=</span> <span class="n">Rabbit</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Rabbit</span><span class="o">.</span><span class="n">nr_of_rabbits</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">alice</span><span class="o">.</span><span class="n">nr_of_rabbits</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
</pre></div>
</div>
</div>
</div>
<p>Obviously, this does not behave as we expect. We want <code class="docutils literal notranslate"><span class="pre">nr_of_rabbits</span></code> to be 3, since we created 3 rabbits. But we see that the class variable <code class="docutils literal notranslate"><span class="pre">Rabbit.nr_of_rabbits</span></code> reports 0 rabbits, and <code class="docutils literal notranslate"><span class="pre">alice.nr_of_rabbits</span></code>, which should just default to the class variable reports 1 rabbit!  What is actually happening here?</p>
<p>When we write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [15],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="ne">NameError</span>: name &#39;self&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>This is equivalent to writing</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [16],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nr_of_rabbits</span> <span class="o">+</span> <span class="mi">1</span>

<span class="ne">NameError</span>: name &#39;self&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Now the right hand side is evaluated first. When creating the object, the new rabbit has no <code class="docutils literal notranslate"><span class="pre">nr_of_rabbits</span></code> instance variable, so it looks up the class variable instead, which is 0, then we add 1, giving 1 as a result.</p>
<p>Now, this is supposed to be stored in the variable to the left of the assignment operator (<code class="docutils literal notranslate"><span class="pre">=</span></code>), but <code class="docutils literal notranslate"><span class="pre">self.nr_of_rabbits</span></code> is interpreted by Python as if we want to create this instance variable. Therefore, the new rabbit object gets its own personal <code class="docutils literal notranslate"><span class="pre">nr_of_rabbit</span></code> instance variable, and the class variable never gets updated.</p>
<p>Note that this happens because an integer is <em>immutable</em>. If we had a class variable that was mutable, then it would behave differently. We could for example contain all objects of a class in a list as a class variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Rabbit</span><span class="p">:</span>
    <span class="n">all_rabbits</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_rabbits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">)&quot;</span>


<span class="n">Rabbit</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Rabbit</span><span class="p">(</span><span class="s2">&quot;Buddy&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">Rabbit</span><span class="p">(</span><span class="s2">&quot;Charlie&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rabbit(Charlie)
</pre></div>
</div>
</div>
</div>
<p>In this case, writing <code class="docutils literal notranslate"><span class="pre">self.all_rabbits.append(self)</span></code> means we add the object itself to the class variable list. Because lists are mutable, we end up changing the class variable, instead of creating an instance variable. Although it works writing <code class="docutils literal notranslate"><span class="pre">self.all_rabbits</span></code> in this case, it isn’t very readable for a user, as they might think this is a instance variable because of the <code class="docutils literal notranslate"><span class="pre">self</span></code>. So here, it would be better to just write out <code class="docutils literal notranslate"><span class="pre">Rabbit.all_rabbits</span></code>, or <code class="docutils literal notranslate"><span class="pre">self.__class__.all_rabbits</span></code>, to make it clear to the user that this is the class variable that is being changed.</p>
</div>
<div class="section" id="parameters-as-class-variables">
<h3>Parameters as class variables<a class="headerlink" href="#parameters-as-class-variables" title="Permalink to this headline">¶</a></h3>
<p>Class variables are well suited for storing parameters that are usually shared by all objects of the class. Take for instance a Pendulum class</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Pendulum</span><span class="p">:</span>
    <span class="n">G</span> <span class="o">=</span> <span class="mf">9.81</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">M</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="n">M</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="n">L</span>
</pre></div>
</div>
</div>
</div>
<p>In this class, we can create pendulums of different lengths and masses. We can then use <code class="docutils literal notranslate"><span class="pre">self.M</span></code> and <code class="docutils literal notranslate"><span class="pre">self.L</span></code> to refer to these in calculations. Note that we can also refer to <code class="docutils literal notranslate"><span class="pre">self.G</span></code> in calculations, but this will use the class variable <code class="docutils literal notranslate"><span class="pre">G</span></code>, as the objects contain no specific G. We let <code class="docutils literal notranslate"><span class="pre">G</span></code> be a class variable, because all our pendulums typically experience the same gravity.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Pendulum</span><span class="p">(</span><span class="n">M</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">M</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
2
9.81
</pre></div>
</div>
</div>
</div>
<p>One benefit of defining parameters that should be shared across all objects as a class variable is that it is now easy to change the parameter for all objects, those already created and those we create in the future.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Pendulum</span><span class="o">.</span><span class="n">G</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10
</pre></div>
</div>
</div>
</div>
<p>Thus, the parameter has a single, definite representation in our system. Which is usually a good approach.</p>
</div>
</div>
<div class="section" id="class-methods">
<span id="id1"></span><h2>Class Methods<a class="headerlink" href="#class-methods" title="Permalink to this headline">¶</a></h2>
<p>In addition to defining class variables, we can define class methods. Class methods are methods we call on the <em>class</em>, not on a specific object. The easiest approach to creating a class method in Python is to use the <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> decorator. One of the typical use cases for a class method are <em>factory methods</em>. Factory methods are methods that create objects of the class, but perhaps in a different way than what the constructor does.</p>
<p>A Python class can only have one constructor. Creating objects in different ways is achieved through factory methods:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">class</span> <span class="nc">Sphere</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>

    <span class="k">def</span> <span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">**</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">3</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_volume</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">volume</span><span class="p">):</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">volume</span> <span class="o">/</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here, we make our <code class="docutils literal notranslate"><span class="pre">Sphere</span></code> class as normal, where we create spheres by specifying their radius. However, sometimes, we might want to instead create a sphere with a given volume. To do this, we create a <em>factory method</em>. We then use the <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> decorator to create it, for normal <em>instance</em> methods, the first argument to a method is always the self, but now we call the first argument is <code class="docutils literal notranslate"><span class="pre">cls</span></code>, which is short for “class”.</p>
<p>We can use the class method as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ball</span> <span class="o">=</span> <span class="n">Sphere</span><span class="o">.</span><span class="n">from_volume</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Radius: </span><span class="si">{</span><span class="n">ball</span><span class="o">.</span><span class="n">radius</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> </span><span class="se">\t</span><span class="s2"> Volume: </span><span class="si">{</span><span class="n">ball</span><span class="o">.</span><span class="n">volume</span><span class="p">()</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Radius: 10.6 	 Volume: 5000.0
</pre></div>
</div>
</div>
</div>
<p>Here, because we defined the method as a class method,</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">Sphere</span><span class="o">.</span><span class="n">from_volume</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
<p>is actually interpreted as</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">Sphere</span><span class="o">.</span><span class="n">from_volume</span><span class="p">(</span><span class="n">Sphere</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
<p>And so <code class="docutils literal notranslate"><span class="pre">cls</span></code> would refer to the class itself within the class method, exactly like <code class="docutils literal notranslate"><span class="pre">self</span></code>  refers to the object itself in normal instance methods.</p>
<p>A common usage of factory methods is to choose the right subclass based on user input. As an example, consider again the <code class="docutils literal notranslate"><span class="pre">ODESolver</span></code> class hierarchy, and say we want to let the user pass a string to the class to specify the solver, as in:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver</span> <span class="o">=</span> <span class="n">ODESolver</span><span class="o">.</span><span class="n">create_solver</span><span class="p">(</span><span class="s1">&#39;FE&#39;</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>One may think that this could also be solved by simply adding a string argument to the <code class="docutils literal notranslate"><span class="pre">ODESolver</span></code> constructor:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver</span> <span class="o">=</span> <span class="n">ODESolver</span><span class="p">(</span><span class="s1">&#39;FE&#39;</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>But this will not work since we are not creating an <code class="docutils literal notranslate"><span class="pre">ODESolver</span></code> instance, but an instance of one of the subclasses.</p>
<p>The solution is a factory method which knows about the subclasses:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_solver</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="n">solver_type</span><span class="p">,</span><span class="n">f</span><span class="p">):</span>
    <span class="n">SOLVER_TO_CLS_MAP</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;FE&#39;</span><span class="p">:</span>  <span class="n">ForwardEuler</span><span class="p">,</span>
        <span class="s1">&#39;BE&#39;</span><span class="p">:</span> <span class="n">BackwardEuler</span><span class="p">,</span>
        <span class="s1">&#39;RK4&#39;</span><span class="p">:</span> <span class="n">RungeKutta4</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">solver_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SOLVER_TO_CLS_MAP</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bad solver type </span><span class="si">{</span><span class="n">message_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">SOLVER_TO_CLS_MAP</span><span class="p">[</span><span class="n">solver_type</span><span class="p">](</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="other-factory-method-use-cases">
<h3>Other factory method use cases<a class="headerlink" href="#other-factory-method-use-cases" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Create factory methods for unit testing, i.e. initiate some instances with predefined parameters.</p></li>
<li><p>Initiating objects based on <em>random</em> data.</p></li>
<li><p>Create objects from a file. By creating a factory method <code class="docutils literal notranslate"><span class="pre">from_file</span></code> which reads in some data file, and sets up the object accordingly. Here, we can also create a method for saving all the data in the object to a file, which can be read in later. This would be an example of <em><a class="reference external" href="https://en.wikipedia.org/wiki/Application_checkpointing">checkpointing</a></em>, which is an extremely useful feature for computations and simulations that take a long time to run.</p></li>
</ul>
</div>
</div>
<div class="section" id="static-methods">
<h2>Static Methods<a class="headerlink" href="#static-methods" title="Permalink to this headline">¶</a></h2>
<p>Another kind of method, which is different from both class methods and instance methods, are the <em>static</em> methods. These are methods that while they belong to a class, is called without using any class or object information. You define a static method with the <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code> decorator, unlike instance and class methods, the static methods do not take any particular variable in as the first variable.</p>
<p>The static methods do not use any information about the class or object, and so <em>could</em> for all intents and purposes just be a stand-alone function. However, we like to implement it as a static method, because then the functionality is stored within the class, and makes the whole code cleaner.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">birthday</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span> <span class="o">=</span> <span class="n">birthday</span>

    <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_age</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">calculate_age</span><span class="p">(</span><span class="n">birthday</span><span class="p">):</span>
        <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
        <span class="n">month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">month</span><span class="p">)</span>
        <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
        <span class="n">today</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="n">year</span><span class="p">)</span> <span class="o">-</span> <span class="p">((</span><span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Here we have created a static method <code class="docutils literal notranslate"><span class="pre">calculate_age</span></code>, that computes the age of a person right now, given that person’s birthday as a string on the form “dd.mm.yyyy”. We can call this function as</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">calculate_age</span><span class="p">(</span><span class="s2">&quot;20.02.1975&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>47
</pre></div>
</div>
</div>
</div>
<p>This function is a “stand-alone” function, it doesn’t depend on any class or instance data. However, after we have created this method, we can use it in the <code class="docutils literal notranslate"><span class="pre">age</span></code> method, which returns the age of a given person-object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;Joe Schmoe&quot;</span><span class="p">,</span> <span class="s2">&quot;17.04.1983&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">age</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">calculate_age</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>39
&lt;function Person.calculate_age at 0x7fa86124e830&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-methods-vs-static-methods-1">
<h3>Class Methods vs Static Methods (1)<a class="headerlink" href="#class-methods-vs-static-methods-1" title="Permalink to this headline">¶</a></h3>
<p>Static methods and class methods appear to be quite similar. The difference can be understood by considering the Python concept of <em>bound methods</em>:</p>
<ul class="simple">
<li><p>An ordinary function in Python is often called an unbound function, because it is not bound to a particular class or object.</p></li>
<li><p>On the other hand, a regular instance method defined in a class becomes <em>bound to an instance</em> every time a new instance of the class is generated. In fact, when we create a new instance, we also create a new function object, which is bound to that instance and thereby becomes a bound method. Each instance has its own method object. The most important effect of this binding is that the instance is automatically passed as the first argument to the method (<code class="docutils literal notranslate"><span class="pre">self</span></code>).</p></li>
</ul>
</div>
<div class="section" id="class-methods-vs-static-methods-2">
<h3>Class Methods vs Static Methods (2)<a class="headerlink" href="#class-methods-vs-static-methods-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> decorator simply tells Python that this function should be bound to the class and not the instance. No matter how many instances we create, there will only exist one method object, and when we call it the class (<code class="docutils literal notranslate"><span class="pre">cls</span></code>), and not the instance, is automatically passed as the first argument. The method can still be accessed through a specific instance, but it still remains bound to the class and the class is passed as the first argument.</p></li>
<li><p>Finally, when we use the <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code> decorator, we tell Python that this function should not be bound to either the class or the instance, but remain an unbound function. It is still defined within the <em>namespace</em> of the class, and can be accessed either through the class or through a specific instance (as for <code class="docutils literal notranslate"><span class="pre">calculate_age</span></code> above), but it remains an unbound Python function and no arguments get passed automatically.</p></li>
</ul>
</div>
<div class="section" id="class-methods-vs-static-methods-3">
<h3>Class Methods vs Static Methods (3)<a class="headerlink" href="#class-methods-vs-static-methods-3" title="Permalink to this headline">¶</a></h3>
<p>These differences lead to the following “rules” for when to use the different methods:</p>
<ul class="simple">
<li><p>Use a regular instance method if it needs access to instance data. This is by far the most common use case in OOP.</p></li>
<li><p>If the method does not need access to instance data, but it does access class data, define it as a class method.</p></li>
<li><p>Finally, if the method logically belongs to the class, but does not operate on either
instance data or class data (i.e. neither <code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, or the class name appear inside the function body) it should be a static method.</p></li>
</ul>
<div class="section" id="quiz-why-is-this-factory-method-a-classmethod-not-a-staticmethod">
<h4>Quiz: why is this factory method a &#64;classmethod, not a &#64;staticmethod?<a class="headerlink" href="#quiz-why-is-this-factory-method-a-classmethod-not-a-staticmethod" title="Permalink to this headline">¶</a></h4>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_solver</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="n">solver_type</span><span class="p">,</span><span class="n">f</span><span class="p">):</span>
    <span class="n">SOLVER_TO_CLS_MAP</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;FE&#39;</span><span class="p">:</span>  <span class="n">ForwardEuler</span><span class="p">,</span>
        <span class="s1">&#39;BE&#39;</span><span class="p">:</span> <span class="n">BackwardEuler</span><span class="p">,</span>
        <span class="s1">&#39;RK4&#39;</span><span class="p">:</span> <span class="n">RungeKutta4</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">solver_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SOLVER_TO_CLS_MAP</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Bad solver type </span><span class="si">{</span><span class="n">solver_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">SOLVER_TO_CLS_MAP</span><span class="p">[</span><span class="n">solver_type</span><span class="p">](</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="answer">
<h4>Answer:<a class="headerlink" href="#answer" title="Permalink to this headline">¶</a></h4>
<p>This was a trick question. The method could just as well be a <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code>, since neither <code class="docutils literal notranslate"><span class="pre">self</span></code> nor <code class="docutils literal notranslate"><span class="pre">cls</span></code> appear inside the function body. However, it is still a good idea to keep it a <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code>, because</p>
<ul class="simple">
<li><p>We could have made the solver to class map more flexible by using the builtin function <code class="docutils literal notranslate"><span class="pre">cls.__subclasses()</span></code>, and this would only work with a class method.</p></li>
<li><p>It is common in Python to implement factory methods as class methods, so following this convention makes the code more readable. (However, in C++ and other programming languages, it is common to implement factory methods as static methods.)</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="a-3d-vector-class">
<h2>A 3D vector class<a class="headerlink" href="#a-3d-vector-class" title="Permalink to this headline">¶</a></h2>
<p>In this final part of this section we will try to bring it all together and implement several different method on a specific class. By adding more and more functionality to this class, we illustrate different special methods and possibilities in Python and how these work.</p>
<p>As a specific case example, we will implement a class for three dimensional vectors <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code>. We want objects of this class to behave mathematically as vectors, and we will add functionality to do vector arithmetic.</p>
<div class="section" id="id2">
<h3>The constructor (<code class="docutils literal notranslate"><span class="pre">__init__</span></code>)<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The most fundamental method of any class is its <em>constructor</em>, which is automatically called when we create a new instance of a class. In Python, the constructor is called <code class="docutils literal notranslate"><span class="pre">__init__</span></code> (short for <em>initialize</em>). To define a 3D vector, we need to specify its three cartesian coordinates, which we call <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, <span class="math notranslate nohighlight">\(z\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">class</span> <span class="nc">Vector3D</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A class representing 3D cartesian vectors&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>
</pre></div>
</div>
</div>
</div>
<p>This constructor doesn’t do much other than save the three coordinates as internal attributes. This is necessary so that the object remembers its coordinates and can use them later. The string on line 4 is an example of a <em>docstring</em>, which we will describe in more detail next week. If you have not seen such strings before, simply think of it as a comment for now.</p>
</div>
<div class="section" id="pretty-printing">
<h3>Pretty printing<a class="headerlink" href="#pretty-printing" title="Permalink to this headline">¶</a></h3>
<p>Next we want to be able to print out vectors, so that we can check our results. We implement this using the string special method (<code class="docutils literal notranslate"><span class="pre">__str__</span></code>). If we were just implementing this in an editor, we would just keep editing our file. In the notebook, we don’t want to repeat the whole class for each cell. Instead we just extend our existing class as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2">)&quot;</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0, 4, -2)
</pre></div>
</div>
</div>
</div>
<p>Here, extending the class by writing <code class="docutils literal notranslate"><span class="pre">Vector3D(Vector3D)</span></code> works because of <em>inheritance</em>, as we will explain later. For now, you can think of it as adding code to the existing class. Note however, that any vectors defined before we extend the class will <em>not</em> be updated. So in the notebook we must remember to define new vector instances when we want to test our code.</p>
</div>
<div class="section" id="the-repr-method">
<h3>The repr method<a class="headerlink" href="#the-repr-method" title="Permalink to this headline">¶</a></h3>
<p>Our string special method works nicely and can be used to print out vectors in our code. Recall however that when printing sequences such as lists, they will still look quite rough</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">([</span><span class="n">u</span><span class="p">,</span> <span class="n">u</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;__main__.Vector3D object at 0x7fa86124a380&gt;, &lt;__main__.Vector3D object at 0x7fa86124a380&gt;]
</pre></div>
</div>
</div>
</div>
<p>The solution to this was to add the <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> method, which should provide the string we can be used to recreate the object if need be. We can add it as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Vector3D(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">}</span><span class="s2">)&quot;</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">vectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vectors</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Vector3D(0, 4, -2), Vector3D(3, 0, 1)]
</pre></div>
</div>
</div>
</div>
<p>Here the vectors get written out on the form which can be used to recreate the objects with <code class="docutils literal notranslate"><span class="pre">eval</span></code>, which is exactly what we want. However, there is a small trick we can use to make the <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> a bit more general, which is to use the exploit the fact that all classes in Python “know” their own name. Look at the following code</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>So instead of writing the name <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> directly into the code (known as “hard coding” it), we use the variable <code class="docutils literal notranslate"><span class="pre">type(self).__name__</span></code> to refer to the name of the class. First <code class="docutils literal notranslate"><span class="pre">type(self)</span></code> will return the class, in this case <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> and the access the name of the class which will be a string <code class="docutils literal notranslate"><span class="pre">&quot;Vector3D&quot;</span></code>.</p>
<p>What is the benefit of doing this? Well, if we later want to change the <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> name to something else, the method will update automatically. Secondly, and perhaps more important is that we can also use <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> to create new classes through inheritance, and then we want the new classes to automatically have <code class="docutils literal notranslate"><span class="pre">repr</span></code> referring to their own class, not their parent class.</p>
</div>
</div>
<div class="section" id="vector-arithmetic">
<h2>Vector Arithmetic<a class="headerlink" href="#vector-arithmetic" title="Permalink to this headline">¶</a></h2>
<p>The main goal of our <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> class is to automate vector arithmetic, so let us extend our class to handle this. We start by focusing on addition and subtraction</p>
<div class="section" id="addition">
<h3>Addition<a class="headerlink" href="#addition" title="Permalink to this headline">¶</a></h3>
<p>If we want to be able to add two vectors together, we need to add a method that defines how such an operation is to be handled. We could for example define a <code class="docutils literal notranslate"><span class="pre">add</span></code> method, and write <code class="docutils literal notranslate"><span class="pre">u.add(v)</span></code> to compute <span class="math notranslate nohighlight">\(u + v\)</span>. However, this isn’t very elegant. Instead, we want to be able to write <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">v</span></code> in our code. A statement like this uses the <em>binary operator</em> <code class="docutils literal notranslate"><span class="pre">+</span></code> (binary meaning it acts on two variables/objects). For any such operators in Python, there is one or more special methods associated with it. So when you write <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code> Python will automatically interpret this behind the scenes as <code class="docutils literal notranslate"><span class="pre">a.__add__(b)</span></code>. Let us implement this method.</p>
<p>The result of adding two vectors together is a brand new vectors. Our <code class="docutils literal notranslate"><span class="pre">__add__</span></code> method therefore needs to create and return a new <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code>-object. If this is confusing, imagine the following code snippet</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="n">v</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [31],</span> in <span class="ni">&lt;cell line: 3&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">w</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="n">v</span>

<span class="ne">TypeError</span>: unsupported operand type(s) for +: &#39;Vector3D&#39; and &#39;Vector3D&#39;
</pre></div>
</div>
</div>
</div>
<p>In this case, adding <code class="docutils literal notranslate"><span class="pre">u</span></code> and <code class="docutils literal notranslate"><span class="pre">v</span></code> to define <code class="docutils literal notranslate"><span class="pre">w</span></code> shouldn’t change the values of <code class="docutils literal notranslate"><span class="pre">u</span></code> and <code class="docutils literal notranslate"><span class="pre">v</span></code>, but should instead create a <em>new vector object</em>, which we give the name <code class="docutils literal notranslate"><span class="pre">w</span></code>. For <code class="docutils literal notranslate"><span class="pre">w</span></code> to refer to a new object, it must be created somewhere, and we must do this inside <code class="docutils literal notranslate"><span class="pre">__add__</span></code>. The code therefore can look as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>
        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="n">v</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 0, -2) + (2, 4, 2) = (4, 4, 0)
</pre></div>
</div>
</div>
</div>
<p>This works just the way it should, and this code is perfectly fine. However, we have again hard-coded in the name of our class in the method implementation itself. It would be <em>even better</em> to do as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="n">v</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 0, -2) + (2, 4, 2) = (4, 4, 0)
</pre></div>
</div>
</div>
</div>
<p>This makes our code more general and better suited for extending in the future.</p>
</div>
<div class="section" id="self-and-other">
<h3><code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code><a class="headerlink" href="#self-and-other" title="Permalink to this headline">¶</a></h3>
<p>We just defined our addition method with the statement <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">__add__(self,</span> <span class="pre">other)</span></code>, which can be a bit confusing.  To better understand this, it can be helpful to first understand why there must be two arguments. This is because we are talking about <em>binary</em> addition, meaning two things are added together. When we write <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>, these two objects are being added, so <code class="docutils literal notranslate"><span class="pre">self</span></code> will refer to <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> will refer to <code class="docutils literal notranslate"><span class="pre">b</span></code>. This can become more clear if we realize what calls are being made behind the scenes:</p>
<ol class="simple">
<li><p>We write: <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code></p></li>
<li><p>Which Python interprets as: <code class="docutils literal notranslate"><span class="pre">a.__add__(b)</span></code></p></li>
<li><p>Which in turn actually means: <code class="docutils literal notranslate"><span class="pre">Vector3D.__add__(a,</span> <span class="pre">b)</span></code></p></li>
</ol>
<p>So in the method we have written, which has the signature <code class="docutils literal notranslate"><span class="pre">__add__(self,</span> <span class="pre">other)</span></code>, we see that <code class="docutils literal notranslate"><span class="pre">a</span></code> is the self, and <code class="docutils literal notranslate"><span class="pre">b</span></code> is the other.</p>
<p>The use of <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> can be a tricky concept to wrap your head around, but it is fundamental to mastering classes, so it is very worth the time to take time to properly digest this material.</p>
<p>Please note however that the names <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> are <em>not</em> reserved keywords in Python, and it is possible to pick other names for these variables. However, <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> are very commonly used, and can be considered strict conventions. We therefore recommend you stick to these unless you have a good reason to deviate.</p>
</div>
<div class="section" id="vector-scalar-addition">
<h3>Vector-scalar addition<a class="headerlink" href="#vector-scalar-addition" title="Permalink to this headline">¶</a></h3>
<p>We have added a method to add two vectors together, so we can write <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">v</span></code>. What happens if we try to add a vector and an integer <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">1</span></code>?</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We can an error: <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">'int'</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'x'</span></code>.</p>
<p>This error happens because our <code class="docutils literal notranslate"><span class="pre">other</span></code>-object in this case is no longer a <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code>-object, but an <code class="docutils literal notranslate"><span class="pre">int</span></code>. Here we get an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> because we try to use <code class="docutils literal notranslate"><span class="pre">other.x</span></code>, but the integer has no <code class="docutils literal notranslate"><span class="pre">.x</span></code> attribute to access. In this case, we should actually be checking what type <code class="docutils literal notranslate"><span class="pre">other</span></code> and treat it differently depending on its type. We know <code class="docutils literal notranslate"><span class="pre">self</span></code> is a <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code>, so we don’t need to check this.</p>
<p>Now, what behavior do we want if actually try to add an integer? We could either say we add the number to each component separately, so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">other</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">other</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="n">other</span>
</pre></div>
</div>
<p>This is how a numpy array works for example. In our case, however, we want the <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> class to represent a mathematical vector, and for these, adding a vector and a scaler together doesn’t make sense because they have different dimensions. Therefore, we should throw an exception instead. Let us generalize this to throw an error if we try to add anything other than another vector object as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>
            <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
            <span class="c1"># or return self.__class__(x, y, z)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cannot add vector and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">+</span> <span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="s2"> gives &#39;TypeError: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 0, -2) + (2, 4, 2) = (4, 4, 0)
(2, 0, -2) + 1 gives &#39;TypeError: cannot add vector and &lt;class &#39;int&#39;&gt;&#39;
</pre></div>
</div>
</div>
</div>
<p>You could now argue that one for example should be able to add a <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> and a list of three numbers, e.g., <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">[1,</span> <span class="pre">3,</span> <span class="pre">1]</span></code>. You can try to extend the <code class="docutils literal notranslate"><span class="pre">__add__</span></code> method to account for such a possibility if you want. For now, we move on to other operations.</p>
</div>
<div class="section" id="subtraction">
<h3>Subtraction<a class="headerlink" href="#subtraction" title="Permalink to this headline">¶</a></h3>
<p>Extending our class to also handle subtraction of vectors is very similar to addition, we simply use the subtraction special method instead (<code class="docutils literal notranslate"><span class="pre">__sub__</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>
            <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
            <span class="c1"># or return self.__class__(x, y, z)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cannot subtract vector and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">-</span> <span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="si">}</span><span class="s2"> gives &#39;TypeError: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 0, -2) - (2, 4, 2) = (0, -4, -4)
(2, 0, -2) - 0.5 gives &#39;TypeError: cannot add vector and &lt;class &#39;float&#39;&gt;&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-unary-negative-operator-aka-minus">
<h3>The unary negative operator (aka “minus”)<a class="headerlink" href="#the-unary-negative-operator-aka-minus" title="Permalink to this headline">¶</a></h3>
<p>We have now defined and implemented what <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">v</span></code> and <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">-</span> <span class="pre">v</span></code> means for our vectors. From mathematics, we know that <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">-</span> <span class="pre">(-v)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">v</span></code>, but will Python understand this? If we were doing test-driven development (such as in Project 0), this would be a good example of a new test to add.</p>
<p>If you try yourself, you will see that the operation <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">-</span> <span class="pre">(-v)</span></code> does <em>not</em> work, but instead throws the following error message</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">TypeError</span><span class="p">:</span> <span class="n">bad</span> <span class="n">operand</span> <span class="nb">type</span> <span class="k">for</span> <span class="n">unary</span> <span class="o">-</span><span class="p">:</span> <span class="s1">&#39;Vector3D&#39;</span>
</pre></div>
</div>
<p>This can be a confusing message, so let us break it down for you.</p>
<p>In the expression <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">-</span> <span class="pre">(-v)</span></code> we have <em>two</em> subtraction operators, both represented by <code class="docutils literal notranslate"><span class="pre">-</span></code>. The first one is the normal binary subtraction which acts on the two variables <code class="docutils literal notranslate"><span class="pre">u</span></code> and <code class="docutils literal notranslate"><span class="pre">(-v)</span></code>. This corresponds to <code class="docutils literal notranslate"><span class="pre">__sub__</span></code> which we have already added. The second subtraction however, in <code class="docutils literal notranslate"><span class="pre">(-v)</span></code> does not act on two variables and so is instead a <em>unary subtraction</em> (unary meaning “acting on one operand”). This operation is coupled to the special method <code class="docutils literal notranslate"><span class="pre">__neg__</span></code> (for negative). When Python interprets our code it must first resolve the parentheses and compute the negative of <code class="docutils literal notranslate"><span class="pre">v</span></code>, and we have not defined how this is done for our class, which is why we get the error message “bad operand type for unary -“.</p>
<p>Let us now define the <code class="docutils literal notranslate"><span class="pre">__neg__</span></code> special method. As this is a unary operator, we only take in the <code class="docutils literal notranslate"><span class="pre">self</span></code> argument, and skip the <code class="docutils literal notranslate"><span class="pre">other</span></code> (as there is no “other” vector in this case)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
        <span class="c1"># or return self.__class__(-self.x, -self.y, -self.z)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> - (-</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">) = </span><span class="si">{</span><span class="n">u</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 0, -2) - (-(2, 4, 2)) = (4, 4, 0)
</pre></div>
</div>
</div>
</div>
<p>The code now works. First the <code class="docutils literal notranslate"><span class="pre">__neg__</span></code> method is used to compute <code class="docutils literal notranslate"><span class="pre">(-v)</span></code>, then <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">-</span> <span class="pre">(-v)</span></code> is computed using <code class="docutils literal notranslate"><span class="pre">__sub__</span></code>.</p>
<p>Another small detail you can note here is that if we had implemented our <code class="docutils literal notranslate"><span class="pre">__neg__</span></code> method <em>first</em>, then we could have relied on this when implementing <code class="docutils literal notranslate"><span class="pre">__sub__</span></code>. Check this out:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cannot subtract vector and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">-</span> <span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 0, -2) - (2, 4, 2) = (0, -4, -4)
</pre></div>
</div>
</div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">__sub__</span></code> method behaves just as before, but the implementation now relies on <code class="docutils literal notranslate"><span class="pre">__neg__</span></code> (and <code class="docutils literal notranslate"><span class="pre">__add__</span></code>) by saying that <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">-</span> <span class="pre">v</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">+</span> <span class="pre">(-v)</span></code>. Tricks like these can be nice when implementing arithmetic methods.</p>
</div>
<div class="section" id="multiplying-vectors">
<h3>Multiplying vectors<a class="headerlink" href="#multiplying-vectors" title="Permalink to this headline">¶</a></h3>
<p>We now want to add functionality for multiplying vectors. For 3D vectors, several type of multiplication exists. We want to be able to do both the dot product, and the cross product. Let us implement these as normal methods (not special methods) first. Just to remind you, the two multiplications are defined as follows</p>
<div class="math notranslate nohighlight">
\[u \cdot v = (x_1, y_1, z_1) \cdot (x_2, y_2, z_2) = x_1x_2 + y_1y_2 + z_1z_2.\]</div>
<div class="math notranslate nohighlight">
\[u \times v = (x_1, y_1, z_1) \times (x_2, y_2, z_2) = (y_1z_2 - z_1y_2, z_1x_2 - x_1z_2, x_1y_2 - y_1x_2).\]</div>
<p>An important point here is that the dot-product should return a number (i.e., <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code>), while the cross product should return a new vector object. The two methods can look as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>

    <span class="k">def</span> <span class="nf">cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can now use <code class="docutils literal notranslate"><span class="pre">u.dot(v)</span></code> and <code class="docutils literal notranslate"><span class="pre">u.cross(v)</span></code> in our code, which is quite a nice syntax as it spells our exactly what kind of vector multiplication we are computing. We can of course <em>also</em> add them as special methods if we want, in fact it is quite easy because we can simply call the <code class="docutils literal notranslate"><span class="pre">dot</span></code> and <code class="docutils literal notranslate"><span class="pre">cross</span></code> methods (this is called “aliasing”)</p>
<p>Let us decide that we want <code class="docutils literal notranslate"><span class="pre">u*v</span></code> to be interpreted as the dot product. This multiplication operator is associated with the special method <code class="docutils literal notranslate"><span class="pre">__mul__</span></code>. So we can write</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Interpret u*v as the dot product&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We have now “used up” the asterisk multiplication operator in Python, what syntax can we then choose for our cross product? Well, one option is to use the code syntax <code class="docutils literal notranslate"><span class="pre">u</span> <span class="pre">&#64;</span> <span class="pre">v</span></code> to mean the cross product. You might not have seen (or used) the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator in Python code before, but it is a binary operator associated with the special method <code class="docutils literal notranslate"><span class="pre">__matmul__</span></code> (short for “matrix multiplication). It actually isn’t used by any of the built in Python objects, but it is available for mathematics where we want to have access to more operators. (Note that for numpy arrays, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> is implemented, but will correspond to the dot-product for 1D-arrays, while <code class="docutils literal notranslate"><span class="pre">*</span></code> means component-wise multiplication).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__matmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Interpret u @ v as the cross product&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">*</span> <span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> @ </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">u</span> <span class="o">@</span> <span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, -1, 0) * (1, 4, 2) = -3
(1, -1, 0) @ (1, 4, 2) = (-2, -2, 5)
</pre></div>
</div>
</div>
</div>
<p>A useful property of the dot product is that two vectors are perpendicular if, and only if, the dot product is equal to zero (<span class="math notranslate nohighlight">\(u \cdot v = 0 \Leftrightarrow u \perp v\)</span>). Let us therefore add a <code class="docutils literal notranslate"><span class="pre">perpendicular</span></code> method, which checks if two vectors are perpendicular</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">perpendicular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="bp">self</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>Note that we use <code class="docutils literal notranslate"><span class="pre">np.isclose</span></code> because the coordinates of the vectors can easily be <code class="docutils literal notranslate"><span class="pre">floats</span></code>, and comparing floating points to zero is a common pitfall due to floating point errors.</p>
<p>From linear algebra you can prove that if you define a vector as the cross product of two vectors, i.e.,</p>
<div class="math notranslate nohighlight">
\[
w = u \times v
\]</div>
<p>Then the new vector <span class="math notranslate nohighlight">\(w\)</span> will be perpendicular to both <span class="math notranslate nohighlight">\(u\)</span> and <span class="math notranslate nohighlight">\(v\)</span>. This can be used to test our code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="o">=</span> <span class="n">u</span> <span class="o">@</span> <span class="n">v</span>

<span class="c1"># Printing answer</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is u ⊥ v? </span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is w ⊥ u? </span><span class="si">{</span><span class="n">w</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">u</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is w ⊥ v? </span><span class="si">{</span><span class="n">w</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Asserting answer</span>
<span class="k">assert</span> <span class="n">w</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">w</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Is u ⊥ v? False
Is w ⊥ u? True
Is w ⊥ v? True
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="scalar-multiplication">
<h3>Scalar multiplication<a class="headerlink" href="#scalar-multiplication" title="Permalink to this headline">¶</a></h3>
<p>We have now defined vector-vector multiplication, but it is also possible to multiply vectors by scalers (i.e., numbers). We can for example compute <span class="math notranslate nohighlight">\(3u\)</span>, which corresponds to multiplying each component of the vector by the number 3 separately.</p>
<p>We now want to be able to write <code class="docutils literal notranslate"><span class="pre">3*u</span></code> or <code class="docutils literal notranslate"><span class="pre">u*3</span></code> in our code to capture this mathematical operation. Let us first see what happens if we try this with our current code</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [43],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="nb">print</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">u</span><span class="p">)</span>

<span class="ne">TypeError</span>: unsupported operand type(s) for *: &#39;int&#39; and &#39;Vector3D&#39;
</pre></div>
</div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">*</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span> <span class="ow">and</span> <span class="s1">&#39;Vector3D&#39;</span>
</pre></div>
</div>
<p>This error tells us multiplication isn’t defined between integer and vector objects. We is a bit interesting is what happens if we flip the operators, we get a different error message!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">Input In [44],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="nb">print</span><span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span>

<span class="nn">Input In [39],</span> in <span class="ni">Vector3D.__mul__</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="sd">&quot;&quot;&quot;Interpret u*v as the dot product&quot;&quot;&quot;</span>
<span class="ne">----&gt; </span><span class="mi">4</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<span class="nn">Input In [38],</span> in <span class="ni">Vector3D.dot</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="ne">----&gt; </span><span class="mi">3</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>

<span class="ne">AttributeError</span>: &#39;int&#39; object has no attribute &#39;x&#39;
</pre></div>
</div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;x&#39;</span>
</pre></div>
</div>
<p>The second error is similar to the one we got for addition earlier. When we write <code class="docutils literal notranslate"><span class="pre">u*3</span></code>, this is interpreted as <code class="docutils literal notranslate"><span class="pre">u.__mul__(3)</span></code>, which in turn is <code class="docutils literal notranslate"><span class="pre">Vector3D.__mul__(u,</span> <span class="pre">3)</span></code>, and so <code class="docutils literal notranslate"><span class="pre">self</span></code> is <code class="docutils literal notranslate"><span class="pre">u</span></code> is <code class="docutils literal notranslate"><span class="pre">other</span></code>. Because we defined <code class="docutils literal notranslate"><span class="pre">__mul__</span></code> to be the dot-product we try to use <code class="docutils literal notranslate"><span class="pre">other.x</span></code> which is then <code class="docutils literal notranslate"><span class="pre">3.x</span></code> which doesn’t exist. Let us fix this first, and then get back to the first error message after.</p>
<p>To fix this, we should rewrite our <code class="docutils literal notranslate"><span class="pre">__mul__</span></code>-method to do different things depending on if the <code class="docutils literal notranslate"><span class="pre">other</span></code> variable is a vector or a scalar. In programming, this is known as <a class="reference external" href="https://en.wikipedia.org/wiki/Function_overloading"><em>function overloading</em></a>, which is when we define a function or method to do different things depending on context. In this case we overload the <code class="docutils literal notranslate"><span class="pre">*</span></code> operator to mean either vector-vector multiplication or vector-scalar multiplication, depending on context.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="c1"># Vector-vector multiplication</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="c1"># Vector-scalar multiplication</span>
            <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Unknown</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cannot multiply vector and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;u = </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3*u = </span><span class="si">{</span><span class="n">u</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;u*u = </span><span class="si">{</span><span class="n">u</span><span class="o">*</span><span class="n">u</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>u = (1, -1, 0)
3*u = (3, -3, 0)
u*u = 2
</pre></div>
</div>
</div>
</div>
<p>We now see that we can compute <code class="docutils literal notranslate"><span class="pre">u*3</span></code>, and we also check that we can compute the dot-product as before. You should always recheck that you haven’t broken old functionality when you go back and change a function or method—if you have implemented proper tests, this will automatically get checked when you run <code class="docutils literal notranslate"><span class="pre">pytest</span></code>. Here we have to do it manually.</p>
<p>From our implementation of <code class="docutils literal notranslate"><span class="pre">__mul__</span></code>, we now check the second operand and choose the right behavior from this. But what about for <code class="docutils literal notranslate"><span class="pre">3*u</span></code>? If you now try, this still throws a <code class="docutils literal notranslate"><span class="pre">TypeError:</span> <span class="pre">unsupported</span> <span class="pre">operand</span> <span class="pre">type(s)</span> <span class="pre">for</span> <span class="pre">*:</span> <span class="pre">for</span> <span class="pre">'int'</span> <span class="pre">and</span> <span class="pre">'Vector3D'</span></code>. So <code class="docutils literal notranslate"><span class="pre">u*3</span></code> does work, but <code class="docutils literal notranslate"><span class="pre">3*u</span></code> does not. Let us try to understand why one works and the other fails. When we write these statements, they are interpreted as follows</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">3*u</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">3.__mul__(u)</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">int.__mul__(3,</span> <span class="pre">u)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u*3</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">u.__mul__(3)</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Vector3D.__mul__(u,</span> <span class="pre">3)</span></code></p></li>
</ul>
<p>So, the major point is that it is the operand to the left of the multiplication sign (<code class="docutils literal notranslate"><span class="pre">*</span></code>) which decides which class’s <code class="docutils literal notranslate"><span class="pre">__mul__</span></code> method is called. So in <code class="docutils literal notranslate"><span class="pre">3*u</span></code> it isn’t our method that is used at all, but <code class="docutils literal notranslate"><span class="pre">int</span></code>’s. And the built-in <code class="docutils literal notranslate"><span class="pre">int</span></code> hasn’t been written to interact with our custom class.</p>
<p>Mathematically speaking, it is much more common to write <span class="math notranslate nohighlight">\(3u\)</span> than <span class="math notranslate nohighlight">\(u\cdot 3\)</span>, and so saying we should just write <code class="docutils literal notranslate"><span class="pre">u*3</span></code> in our code is not satisfactory. So what can we do? It turns out this problem is so common that Python has a built-in work around in the form of the special method called <code class="docutils literal notranslate"><span class="pre">__rmul__</span></code> (for right multiply). This method is called automatically if the first operands <code class="docutils literal notranslate"><span class="pre">__mul__</span></code> throws an error. So if we implement <code class="docutils literal notranslate"><span class="pre">__rmul__</span></code> we get the following cascade</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">3*u</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">3.__mul__(u)</span></code> -&gt; Throws an error -&gt; <code class="docutils literal notranslate"><span class="pre">u.__rmul__(3)</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Vector3D.__rmul__(u,</span> <span class="pre">3)</span></code></p></li>
</ul>
<p>Effectively, <code class="docutils literal notranslate"><span class="pre">__rmul__</span></code> can be thought of as a “backup” method. One important thing to notice in this cascade is that the operands effectively get flipped when this backup is used. To implement <code class="docutils literal notranslate"><span class="pre">__rmul__</span></code> we can therefore simply use the <code class="docutils literal notranslate"><span class="pre">__mul__</span></code> we already implemented as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">*</span> <span class="n">other</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(8, -12, 4)
</pre></div>
</div>
</div>
</div>
<p>This brings up an important point about operators in programmering. While some operators are generally considered commutative in mathematics, meaning the order can be changed without changing the result (<span class="math notranslate nohighlight">\(a+b = b+a\)</span>), we see that this is not the case in Python. We could for example add different function in the <code class="docutils literal notranslate"><span class="pre">__add__</span></code>-method and in the <code class="docutils literal notranslate"><span class="pre">__radd__</span></code> method, and then <code class="docutils literal notranslate"><span class="pre">a+b</span></code> and <code class="docutils literal notranslate"><span class="pre">b+a</span></code> would behave differently. In fact, you might already know several examples of this, for example adding strings or lists together:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5, 6]
[4, 5, 6, 1, 2, 3]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="adding-properties-to-our-class-length">
<h3>Adding ‘properties’ to our class (Length)<a class="headerlink" href="#adding-properties-to-our-class-length" title="Permalink to this headline">¶</a></h3>
<p>Often we are interested in the length of a vector, or we want a unit vector with the same orientation as a given vector, let us add this as well. Let us now use Python-properties to do this, which we introduced in the previous lecture. The main point was that there were decorators we could use (<code class="docutils literal notranslate"><span class="pre">&#64;property</span></code>).</p>
<p>A quick note: In Python there is a length special method (<code class="docutils literal notranslate"><span class="pre">__len__</span></code>), that is called by Python when we write <code class="docutils literal notranslate"><span class="pre">len(u)</span></code>. This is typically meant for sequences such as lists where the length equals the number of elements. Because of this, the <code class="docutils literal notranslate"><span class="pre">__len__</span></code> method <em>has</em> to return an integer. For our case, a general vector often has a decimal length, and so the <code class="docutils literal notranslate"><span class="pre">__len__</span></code> method wouldn’t work. Which is why we use a property instead.</p>
<p>Let us first add the length property. To compute the length of a vector we first take the dot-product of the vector with itself and then take the square root, i.e., <span class="math notranslate nohighlight">\(|u| = \sqrt{u \cdot u}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span> <span class="o">*</span> <span class="bp">self</span><span class="p">)</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> has a length of </span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, -2, 1) has a length of 3.0
</pre></div>
</div>
</div>
</div>
<p>Here the length-property is very easy to add, because we have already defined the dot product for a vector in <code class="docutils literal notranslate"><span class="pre">__mul__</span></code>, so we can simply write <code class="docutils literal notranslate"><span class="pre">sqrt(self*self)</span></code> and the dot product is computed. Recall that the <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> makes it so the method looks like a <code class="docutils literal notranslate"><span class="pre">float</span></code> variable from the outside, so we write <code class="docutils literal notranslate"><span class="pre">u.length</span></code> instead of <code class="docutils literal notranslate"><span class="pre">u.length()</span></code>.</p>
<p>Let us now make a <code class="docutils literal notranslate"><span class="pre">&#64;length.setter</span></code> method as well, so that we can <em>scale</em> the length of the vector. When we say we scale a vector we typically mean shifting all three vectors so that the length changes while the orientation stays the same. We can therefore scale all three components by the same ratio</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span> <span class="o">*</span> <span class="bp">self</span><span class="p">)</span>

    <span class="nd">@length</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_length</span><span class="p">):</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="n">new_length</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*=</span> <span class="n">ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*=</span> <span class="n">ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*=</span> <span class="n">ratio</span>


<span class="n">u</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> has a length of </span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Rescale u</span>
<span class="n">u</span><span class="o">.</span><span class="n">length</span> <span class="o">*=</span> <span class="mi">2</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> has a length of </span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, -2, 1) has a length of 3.0
(4, -4, 2) has a length of 6.0
</pre></div>
</div>
</div>
</div>
<p>So we see we can double the length of the vector, which automatically scales each component the appropriate amount.</p>
</div>
<div class="section" id="normalization">
<h3>Normalization<a class="headerlink" href="#normalization" title="Permalink to this headline">¶</a></h3>
<p>We can now use <code class="docutils literal notranslate"><span class="pre">length</span></code> method to normalize an instance of the vector by setting the length to 1</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>Now you can create a vector and normalize it</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2, 2)
(0.333333, 0.666667, 0.666667)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="copy-method">
<h3>Copy method<a class="headerlink" href="#copy-method" title="Permalink to this headline">¶</a></h3>
<p>Now, what if you want to normalize the vector instance but still keep the original vector?
You could first copy the vector and then normalize the copy. So, let us implement a copy method. Now, a naive python programmer might implement this as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</div>
</div>
</div>
<p>And now when you try to copy a vector and normalize the copy you will see that you also modified the original instance</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">u</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>v = Vector3D(0.3333333333333333, 0.6666666666666666, 0.6666666666666666)
u = Vector3D(0.3333333333333333, 0.6666666666666666, 0.6666666666666666)
</pre></div>
</div>
</div>
</div>
<p>What can do to fix this. Well, we need to actually create a new Vector3D, i.e</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>


<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">u</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>v = Vector3D(1, 2, 2)
u = Vector3D(0.3333333333333333, 0.6666666666666666, 0.6666666666666666)
</pre></div>
</div>
</div>
</div>
<p>That looks much better. You could even take it one step further and implement the copy method as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>


<span class="n">v</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">u</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">v</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">u</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>v = Vector3D(1, 2, 2)
u = Vector3D(0.3333333333333333, 0.6666666666666666, 0.6666666666666666)
</pre></div>
</div>
</div>
</div>
<p>Now, if you decided to change the name of <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> to e.g <code class="docutils literal notranslate"><span class="pre">Vector</span></code> then you don’t have to change the name in the copy method.</p>
</div>
<div class="section" id="alternative-constructor-creating-a-canonical-unit-vector">
<h3>Alternative constructor - Creating a canonical unit vector<a class="headerlink" href="#alternative-constructor-creating-a-canonical-unit-vector" title="Permalink to this headline">¶</a></h3>
<p>One thing you might want to do is to create a canonical unit vector, i.e the vectors</p>
<div class="math notranslate nohighlight">
\[\begin{split}
e_1 = (1, 0, 0) \\
e_2 = (0, 1, 0) \\
e_3 = (0, 0, 1)
\end{split}\]</div>
<p>To do this we could implement them as class methods. For example as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">)</span>
  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">e1</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Input</span> <span class="n">In</span> <span class="p">[</span><span class="mi">56</span><span class="p">]</span>
    <span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">)</span>
                            <span class="o">^</span>
<span class="ne">SyntaxError</span>: expected &#39;:&#39;
</pre></div>
</div>
</div>
</div>
<p>and then we could make the first canonical unit vector as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e1</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="o">.</span><span class="n">e1</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">Input In [57],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">e1</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="o">.</span><span class="n">e1</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="nb">print</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span>

<span class="ne">AttributeError</span>: type object &#39;Vector3D&#39; has no attribute &#39;e1&#39;
</pre></div>
</div>
</div>
</div>
<p>Now you may wonder, what is this <code class="docutils literal notranslate"><span class="pre">cls</span></code>? You can read more about this in the section about <a class="reference internal" href="#class-methods"><span class="std std-ref">Class Methods</span></a>, but one thing you could do is to print what it is, i.e</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">)</span>
  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">e1</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cls =</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Vector3D = </span><span class="si">{</span><span class="n">Vector3D</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">e1</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="o">.</span><span class="n">e1</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Input</span> <span class="n">In</span> <span class="p">[</span><span class="mi">58</span><span class="p">]</span>
    <span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">)</span>
                            <span class="o">^</span>
<span class="ne">SyntaxError</span>: expected &#39;:&#39;
</pre></div>
</div>
</div>
</div>
<p>Here we also print the class <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> and we see that it is indeed identical to <code class="docutils literal notranslate"><span class="pre">cls</span></code>. Well, we don’t we just use <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> instead, i.e</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vector3D</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">e1</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>This will also work, but there are two problems with this. The first is that if you decide to change the name of the class from <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> to something else then you need to also remember to change the name in this methods. The other problem arises when you want to do inheritance, but we will not go into more details about this now.</p>
<div class="dropdown admonition">
<p class="admonition-title">Click to see the full Vector3D class</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">class</span> <span class="nc">Vector3D</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">g</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot add Vector3D with </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># assert isinstance(other, Vector3D), msg</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>

        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot compare Vector3D with </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot subtract Vector3D with </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># assert isinstance(other, Vector3D), msg</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>

        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>

    <span class="k">def</span> <span class="nf">cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">z</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>
        <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Interpret u*v to be the dot product&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector3D</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="c1"># Alternative use `np.isscalar`</span>
            <span class="k">return</span> <span class="n">Vector3D</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cannot multiply vector and </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__matmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Interpret u@v as cross product&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">perpendicular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-9</span>

    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">*</span> <span class="n">other</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span> <span class="o">*</span> <span class="bp">self</span><span class="p">)</span>

    <span class="nd">@length</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_length</span><span class="p">):</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">new_length</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*=</span> <span class="n">scale</span>

    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">e1</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">e2</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">e3</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="other-special-methods">
<h4>Other Special methods<a class="headerlink" href="#other-special-methods" title="Permalink to this headline">¶</a></h4>
<p>Here we have shown different special methods, but there are plenty left to cover. Virtually any possible behavior of an object can be decided through good use of special methods. For a more detailed walkthrough, see <a class="reference external" href="https://rszalski.github.io/magicmethods/">this guide</a>.</p>
<p>Here are some that might be of special interest:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__eq__</span></code>, for defining when two objects should be considered equal (What does <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></code> mean?).</p></li>
<li><p>You can also define <code class="docutils literal notranslate"><span class="pre">__lt__</span></code> (less than, <span class="math notranslate nohighlight">\(&lt;\)</span>), <code class="docutils literal notranslate"><span class="pre">le</span></code> (less or equal, <span class="math notranslate nohighlight">\(\le\)</span>) and so on. If you implement all the six comparison operators it is typically called <em>rich comparisons</em> and it will make your objects automatically sortable with <code class="docutils literal notranslate"><span class="pre">sort()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__bool__</span></code> defines what <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">x:</span></code> means for our object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__abs__</span></code> defines what <code class="docutils literal notranslate"><span class="pre">abs(x)</span></code> means</p></li>
<li><p>We can also implement <code class="docutils literal notranslate"><span class="pre">lt</span></code>, <code class="docutils literal notranslate"><span class="pre">le</span></code>, <code class="docutils literal notranslate"><span class="pre">gt</span></code>, <code class="docutils literal notranslate"><span class="pre">ge</span></code>, <code class="docutils literal notranslate"><span class="pre">ne</span></code> for <span class="math notranslate nohighlight">\(\lt, \le, \gt, \ge, \ne\)</span>. Implementing all of these is called <em>rich comparisons</em>, and automatically makes our objects sortable with <code class="docutils literal notranslate"><span class="pre">sort()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__bool__</span></code> defines what <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">x:</span></code> means for our object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__abs__</span></code>, defines what <code class="docutils literal notranslate"><span class="pre">abs(x)</span></code> means. For <code class="docutils literal notranslate"><span class="pre">Vector3D</span></code> we could for example define it so that <code class="docutils literal notranslate"><span class="pre">abs(u)</span></code> returns <code class="docutils literal notranslate"><span class="pre">u.length</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> and <code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> can be used to make our object indexable, i.e., define what <code class="docutils literal notranslate"><span class="pre">x[0]</span></code>, <code class="docutils literal notranslate"><span class="pre">x[1]</span></code> and so on means</p></li>
<li><p>(<strong>Advanced</strong>) <code class="docutils literal notranslate"><span class="pre">__hash__</span></code> makes it possible to compute a <a class="reference external" href="https://www.programiz.com/python-programming/methods/built-in/hash">hash value</a> from your object with <code class="docutils literal notranslate"><span class="pre">hash(u)</span></code>. This is needed if you want to use your object as a key in a dictionary.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="short-introduction-to-inheritance">
<h2>Short introduction to inheritance<a class="headerlink" href="#short-introduction-to-inheritance" title="Permalink to this headline">¶</a></h2>
<p>For the last portion of this section, we will give a very brief introduction to <em>inheritance</em>, which we will come back to in more detail in <a class="reference internal" href="oop_concepts.html#designing-oop-programs"><span class="std std-ref">Designing Object-Oriented Programs</span></a>. For now we will just one simple example.</p>
<p>Inheritance is a term we use to describe how we can use one class to build another. In Python we let a class inherit from another when we define it. When we do this, the <em>parent</em> class gives its functionality, i.e., all its attributes to the newly created class, typically called the <em>daughter</em> class. Instead of saying parent/child, one can also say superclass and subclass.</p>
<p>When we create a class through inheritance we start with a class that has all the attributes of its parent, but we can extend this by implementing new methods to add on, or we can overwrite existing methods to change how they work. In general we make a subclass to specialize a class. So the parent/superclass will be a more <em>general</em> case, while the subclass will be more specialized/specific.</p>
<p>Let us look at a somewhat silly example, taken from the mobile game Pokémon Go. If you’ve haven’t played that game, the example is hopefully still easy to follow. Either way, the details about the specific calculations we implement are not the important point here, try to focus more about the big picture, and focus on how we implement the class and use inheritance in this case.</p>
<div class="section" id="example-pokemon-go">
<span id="pokemon-example"></span><h3>Example: Pokémon Go<a class="headerlink" href="#example-pokemon-go" title="Permalink to this headline">¶</a></h3>
<p>In the game Pokémon Go, the goal is for the players to catch different <em>Pokémons</em> (pocket monsters). Many different types of Pokémon exist, some common, some rare. Each Pokémon you catch have different stats and, at least in principle, players want to catch Pokémons with good stats, i.e., high numbers.</p>
<p>As you walk around, the game generates random Pokémon that can be found, and it also randomizes its stats. And we will now implement a code that replicates this.</p>
<p>The stats of a specific Pokémon is dependent on its species/type, because each species has specific base stats. In addition each individual Pokémon caught has a randomized bonus to its stat, called the <em>individual value</em>. These individual values are random numbers between 0 and 15 for all pokemon, regardless of species.</p>
<p>Because some properties vary by species, and some do not, we want to use inheritance. We now want to create a <code class="docutils literal notranslate"><span class="pre">Pokemon</span></code> superclass that has all functionality that is general to all <code class="docutils literal notranslate"><span class="pre">Pokemon</span></code>, and then we can implement specific species as subclasses afterwards.</p>
<p>We now make the <code class="docutils literal notranslate"><span class="pre">Pokemon</span></code> class. Each time a new pokemon is generated, we must draw its individual values randomly. There are three separate stats in the game: <code class="docutils literal notranslate"><span class="pre">ATK</span></code>, <code class="docutils literal notranslate"><span class="pre">DEF</span></code> and <code class="docutils literal notranslate"><span class="pre">STA</span></code>. We implement these as properties.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">class</span> <span class="nc">Pokemon</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">IV_ATK</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">IV_STA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">IV_DEF</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We have no implemented a general constructor that will work for all Pokémon. When a new pokemon is created, three random stats are drawn from the range <span class="math notranslate nohighlight">\([0, 15]\)</span>. Let us also add properties to find the total ATK, DEF and STA stats of a given Pokémon. We also add a <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method for pretty printing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Pokemon</span><span class="p">(</span><span class="n">Pokemon</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ATK</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE_ATK</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">IV_ATK</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">DEF</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE_DEF</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">IV_DEF</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">STA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE_STA</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">IV_STA</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ATK</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">DEF</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">STA</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Two things to notice here are that</p>
<ol class="simple">
<li><p>We use the variables <code class="docutils literal notranslate"><span class="pre">self.BASE_ATK</span></code> and so on. These are not defined anywhere! If you thus try to create a general “Pokemon” and check its stats, you will get an error message. This is intentional, as the general <code class="docutils literal notranslate"><span class="pre">Pokemon</span></code> class is not created to be used directly, only to be inherited from. Such classes are quite common in programming and are typically called <em>abstract classes</em></p></li>
<li><p>Note that we in the <code class="docutils literal notranslate"><span class="pre">str</span></code> special method use the <code class="docutils literal notranslate"><span class="pre">self.__class__.__name__</span></code> variable. This will make it so that the <code class="docutils literal notranslate"><span class="pre">str</span></code> method of any class who inherits from <code class="docutils literal notranslate"><span class="pre">Pokemon</span></code> automatically updates it <code class="docutils literal notranslate"><span class="pre">str</span></code> method. Which is nice.</p></li>
</ol>
<p>Now, let us implement a few specific Pokemon types. Lets start with the two most iconic ones:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Pikachu</span><span class="p">(</span><span class="n">Pokemon</span><span class="p">):</span>
    <span class="n">BASE_ATK</span> <span class="o">=</span> <span class="mi">112</span>
    <span class="n">BASE_DEF</span> <span class="o">=</span> <span class="mi">101</span>
    <span class="n">BASE_STA</span> <span class="o">=</span> <span class="mi">70</span>


<span class="k">class</span> <span class="nc">Charizard</span><span class="p">(</span><span class="n">Pokemon</span><span class="p">):</span>
    <span class="n">BASE_ATK</span> <span class="o">=</span> <span class="mi">223</span>
    <span class="n">BASE_DEF</span> <span class="o">=</span> <span class="mi">176</span>
    <span class="n">BASE_STA</span> <span class="o">=</span> <span class="mi">156</span>
</pre></div>
</div>
</div>
</div>
<p>Here we write <code class="docutils literal notranslate"><span class="pre">Pikachu(Pokemon)</span></code>, this syntax means the class is inheriting from the class within the parentheses and becomes a subclass. Thus <code class="docutils literal notranslate"><span class="pre">Pikachu</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Pokemon</span></code>, i.e., a specialized sub-case. The same is true for <code class="docutils literal notranslate"><span class="pre">Charizard</span></code>. In either case we do not define any new methods for the class, but instead define the base stats as <em>class attributes</em> because they are the same for all pikachus (more on class attributes next week).</p>
<p>Now we have very easily made two distinct species of Pokemon, without having to re-implement their general behavior. Inheritance has simplified our overall code considerably.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">pokemon</span> <span class="o">=</span> <span class="n">Pikachu</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pokemon</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">pokemon</span> <span class="o">=</span> <span class="n">Charizard</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pokemon</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pikachu(117, 106, 82)
Pikachu(116, 112, 85)
Pikachu(114, 112, 83)
Pikachu(124, 109, 82)
Pikachu(125, 113, 72)

Charizard(225, 181, 165)
Charizard(225, 180, 170)
Charizard(226, 179, 156)
Charizard(238, 182, 156)
Charizard(228, 188, 167)
</pre></div>
</div>
</div>
</div>
<p>One last detail we want to mention is that a subclass is considered a specialized cased of its superclass. In this case, <code class="docutils literal notranslate"><span class="pre">Pikachu</span></code> and <code class="docutils literal notranslate"><span class="pre">Charizard</span></code> are specific examples of Pokémons. We can check that they are indeed considered to be Pokémons as follows</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pikachu</span> <span class="o">=</span> <span class="n">Pikachu</span><span class="p">()</span>
<span class="n">charizard</span> <span class="o">=</span> <span class="n">Charizard</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is Pikachu a Pokemon? </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">pikachu</span><span class="p">,</span> <span class="n">Pokemon</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is Charizard a Pokemon? </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">pikachu</span><span class="p">,</span> <span class="n">Pokemon</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Is Pikachu a Charizard? </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">pikachu</span><span class="p">,</span> <span class="n">Charizard</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Is Pikachu a Pokemon? True
Is Charizard a Pokemon? True
Is Pikachu a Charizard? False
</pre></div>
</div>
</div>
</div>
<p>That was it for this example. The point was to illustrate how the goal of inheritance is to put all the general behavior in the superclass, and then only implement the <em>specifics</em> in the subclasses to specialize them.</p>
<p>If you are interested in Pokemon Go, you can now extend the Pokemon class to for example calculate the CP, tier and so on.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "finsberg/IN1910_H22",
            ref: "gh-pages",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./docs/lectures/python"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="intro_to_oop.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Introduction to Object-Oriented Programming</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="oop_concepts.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Designing Object-Oriented Programs</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Jonas van den Brink, Henrik Finsberg, Kristian G. Hustad, and Joakim Sundnes<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>